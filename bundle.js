webpackJsonp([1],[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}n(1);var r=n(11),a=i(r),o=n(9),s=i(o),u=n(10),l=i(u),c=new Phaser.Game(800,600,Phaser.CANVAS,"game");c.state.add("Menu",a["default"]),c.state.add("Game",s["default"]),c.state.add("Game Over",l["default"]),c.state.start("Menu")},function(e,t,n){var i=n(12);"string"==typeof i&&(i=[[e.id,i,""]]),n(24)(i,{}),i.locals&&(e.exports=i.locals)},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},a={"/":"%SL%",".":"%D%"};t.escapeHtml=function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return r[e]})},t.escapeForWebcom=function(e){return String(e).replace(/[\/\.]/g,function(e){return a[e]})},t.unescapeForWebcom=function(e){return String(e).replace(/(%SL%)|(%D%)/g,function(e){return Object.keys(a).reduce(function(e,t){return i({},e,n({},a[t],t))},{})[e]})},t.isEmail=function(e){return/.+@.+\..{2,10}/.test(e)}},function(e,t,n){e.exports=n.p+"assets/images/cloud1.png"},function(e,t,n){e.exports=n.p+"assets/images/cloud2.png"},function(e,t,n){e.exports=n.p+"assets/images/logo.png"},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.saveScore=t.getBestScore=t.getBestScores=void 0;var a=n(25),o=i(a),s=n(2);"undefined"==typeof document&&(e.__NAMESPACE__="https://io.datasync.orange.com/base/bigbraintowerdev");var u=new o["default"]("https://io.datasync.orange.com/base/bigbraintower"),l=function(){return new Promise(function(e,t){u.child("scores").once("value",function(t){var n=t.val()||[],i=Object.keys(n||[]).map(function(e){return{name:(0,s.unescapeForWebcom)(n[e].name),val:Number(n[e].val)}}).reduce(function(e,t){var n=e.find(function(e){return e.name===t.name});return n&&n.val<t.val?[].concat(r(e.filter(function(e){return e.name!==t.name})),[t]):n?e:[].concat(r(e),[t])},[]);return e(i)})})};t.getBestScores=function(){return l().then(function(e){return e.sort(function(e,t){return t.val-e.val}).slice(0,10)})},t.getBestScore=function(e){return l().then(function(t){var n=t.find(function(t){return t.name===(0,s.escapeForWebcom)(e)});return n&&n.val||0})},t.saveScore=function(e,t){return new Promise(function(n){u.child("scores").push({name:(0,s.escapeForWebcom)(e),val:t},function(){n()})})}}).call(t,function(){return this}())},,function(module,exports){"use strict";function shuffle(e){var t,n,i;for(i=e.length;i;i--)t=Math.floor(Math.random()*i),n=e[i-1],e[i-1]=e[t],e[t]=n}function getRandom(e,t){return Math.floor(Math.random()*(t-e+1))+e}function calculString(e){var t,n,i,r;0===e?(t=getRandom(1,9),n=getRandom(1,9),i="+"):1===e?(t=getRandom(1,9),n=getRandom(1,9),r=getRandom(1,2),1===r?i="+":2===r&&(i="-")):2===e?(t=getRandom(1,9),n=getRandom(1,9),r=getRandom(1,3),1===r?i="+":2===r?i="-":3===r&&(i="*")):e>=3&&9>=e?(t=getRandom(1,19),n=getRandom(1,19),r=getRandom(1,4),1===r?i="+":2===r?i="-":3===r?i="*":4===r&&(i="/")):e>=10&&(t=getRandom(1+e,19+e),n=getRandom(1+e,19+e),r=getRandom(1,4),1===r?i="+":2===r?i="-":3===r?i="*":4===r&&(i="/"));var a=t+i+n;return a}function resultatCalcul(calcul){var resultat=eval(string);return resultat}function propReponses(e){var t=e+getRandom(1,9),n=e-getRandom(1,9),i=e,r=[t,n,i];return shuffle(r),r}function getTime(e){return 5}function getCalcul(level){var cs=calculString(level);return{calculString:cs,responseNumber:Number(eval(cs).toFixed(2)),responseArray:propReponses(eval(cs)),timer:getTime(level)}}function verifyCalcul(e,t){return e==t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculString=calculString,exports.resultatCalcul=resultatCalcul,exports.propReponses=propReponses,exports.getTime=getTime,exports.getCalcul=getCalcul,exports.verifyCalcul=verifyCalcul;var string=calculString()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(8);n(17),n(5),n(18),n(16),n(15),n(3),n(4),n(14),n(1);var o=function(){function e(){i(this,e)}return r(e,[{key:"preload",value:function(){this.game.load.image("tower","assets/images/tower3.png"),this.game.load.image("logo","assets/images/logo.png"),this.game.load.image("towerFilter","assets/images/towerFilter1.png"),this.game.load.image("onelife","assets/images/onelife.png"),this.game.load.image("nolife","assets/images/nolife.png"),this.game.load.image("cloud1","assets/images/cloud1.png"),this.game.load.image("cloud2","assets/images/cloud2.png"),this.game.load.image("arrow","assets/images/arrow1.png")}},{key:"create",value:function(){this.ui,this.lives,this.background,this.gameplay,this.gui,this.score=0,this.scoreText,this.scoreString="score : ",this.cloud,this.timerClouds=0,this.timer=0,this.chrono,this.filter,this.level=0,this.levelString="",this.levelText,this.levelNumber="",this.questionBloc,this.answerBloc,this.cloudSwitch=!0,this.timerBloc,this.currentCalcul,this.checkResponse,this.iteration=0,this.iterationString="good answers : ",this.iterationText,this.nbreLife=3,this.question,this.questionText="",this.floorSprite,this.bloc1,this.bloc2,this.bloc3,this.game.time.events.duration,this.background=this.game.add.physicsGroup(),this.background.stage.backgroundColor="#4ab4e6",this.background.stage.position="absolute",this.cloud=this.background.game.add.physicsGroup();for(var e=0;5>e;e++){var t=this.game.rnd.between(0,800),n=this.game.rnd.between(0,600),i=this.cloud.create(n,t,e%2===0?"cloud1":"cloud2");i.body.velocity.x=this.game.rnd.between(2,10)}this.gameplay=this.game.add.physicsGroup();var r=this.gameplay.game.add.sprite(0,0,"tower");r.tint=16751052,this.gameplay.game.add.sprite(680,0,"logo"),this.ui=$('\n			<div id="blocQuizz">\n			 <div id="quizz">\n			  <div class="wrapper">\n					 <div class="questionBloc"></div>\n					<div class="timerBloc">\n                        <div class="timeElapsed"></div>\n                    </div>\n			  </div>\n			  <div class="answerBloc">\n					<div class="bloc1"></div>\n					<div class="bloc2"></div>\n					<div class="bloc3"></div>\n			  </div>\n			 </div>\n			 </div>			  \n		').appendTo("body"),this.timerBloc=document.getElementsByClassName("timerBloc"),this.timerBloc.tint=16751052,this.answerBloc=document.getElementsByClassName("answerBloc"),this.gui=this.game.add.physicsGroup(),this.lives=this.game.add.group(),this.refreshLives(),this.scoreText=this.gui.game.add.text(130,4,this.scoreString+this.score,{font:"26px Helvetica Neue",fill:"#fff"}),this.iterationText=this.gui.game.add.text(130,40,this.iterationString+this.iteration+" / 10",{font:"16px Helvetica Neue",fill:"grey"}),this.gui.game.add.sprite(0,438,"towerFilter"),this.floorSprite=this.game.add.physicsGroup(),this.floorSprite.game.add.sprite(110,424,"arrow"),this.levelString="level ",this.levelText=this.gui.game.add.text(145,435,this.levelString,{font:"18px Helvetica Neue",fill:"#fff"}),this.levelNumber="",this.levelNumber=this.gui.game.add.text(185,435,this.level,{font:"18px Helvetica Neue",fill:"#fff"}),this.bloc1=document.getElementsByClassName("bloc1")[0],this.bloc2=document.getElementsByClassName("bloc2")[0],this.bloc3=document.getElementsByClassName("bloc3")[0],this.bloc1.addEventListener("click",this.clickResponse.bind(this)),this.bloc2.addEventListener("click",this.clickResponse.bind(this)),this.bloc3.addEventListener("click",this.clickResponse.bind(this)),this.initNewCalcul()}},{key:"getCurrentTime",value:function(){return(new Date).getTime()/1e3}},{key:"getElapsedTime",value:function(){return this.getCurrentTime()-this.startTime}},{key:"getRemainingTime",value:function(){return this.currentCalcul.timer-this.getElapsedTime()}},{key:"initTimerBar",value:function(){var e=this;this.startTime=this.getCurrentTime(),this.timeElapsedBloc=document.getElementsByClassName("timeElapsed")[0],clearInterval(this.TimerBarHandler),this.TimerBarHandler=setInterval(function(){var t=e.getElapsedTime()/e.currentCalcul.timer*100;t>=100&&e.checkAnswer(),e.timeElapsedBloc.style.width=(t>=100?100:t)+"%"},30)}},{key:"initNewCalcul",value:function(){this.currentCalcul=(0,a.getCalcul)(this.level),this.questionBloc=document.getElementsByClassName("questionBloc")[0],this.questionBloc.innerHTML=this.currentCalcul.calculString,this.bloc1.innerHTML=this.currentCalcul.responseArray[0];var e=this.currentCalcul.responseArray[0];e%1!==0&&(this.bloc1.innerHTML=this.currentCalcul.responseArray[0].toFixed(2)),this.bloc2.innerHTML=this.currentCalcul.responseArray[1];var t=this.currentCalcul.responseArray[1];t%1!==0&&(this.bloc2.innerHTML=this.currentCalcul.responseArray[1].toFixed(2)),this.bloc3.innerHTML=this.currentCalcul.responseArray[2];var n=this.currentCalcul.responseArray[2];n%1!==0&&(this.bloc3.innerHTML=this.currentCalcul.responseArray[2].toFixed(2)),this.initTimerBar()}},{key:"clickResponse",value:function(e){var t=Number(e.target.innerText);this.checkAnswer(t)}},{key:"checkAnswer",value:function(e){e===this.currentCalcul.responseNumber?(this.iteration++,this.iterationText.setText(this.iterationString+this.iteration+" / 10"),this.score=this.score+10*(this.level+1)+Math.round(3*this.getRemainingTime()),this.scoreText.setText(this.scoreString+this.score),this.floorUp()):(this.nbreLife=this.nbreLife-1,this.refreshLives()),this.initNewCalcul()}},{key:"floorUp",value:function(){10===this.iteration&&(this.iteration=0,this.level++,this.levelText.setText(this.levelString),this.levelNumber.setText(this.level),this.score=this.score+44*(this.level+1))}},{key:"refreshLives",value:function(){var e,t,n;3===this.nbreLife?(e=this.gui.game.add.sprite(400,4,"onelife"),t=this.gui.game.add.sprite(450,4,"onelife"),n=this.gui.game.add.sprite(500,4,"onelife")):2===this.nbreLife?(e=this.gui.game.add.sprite(400,4,"nolife"),t=this.gui.game.add.sprite(450,4,"onelife"),n=this.gui.game.add.sprite(500,4,"onelife")):1===this.nbreLife?(e=this.gui.game.add.sprite(400,4,"nolife"),t=this.gui.game.add.sprite(450,4,"nolife"),n=this.gui.game.add.sprite(500,4,"onelife")):0===this.nbreLife&&(e=this.gui.game.add.sprite(400,4,"nolife"),t=this.gui.game.add.sprite(450,4,"nolife"),n=this.gui.game.add.sprite(500,4,"nolife"),window.score=this.score,this.game.state.start("Game Over"))}},{key:"shutdown",value:function(){this.ui.remove(),clearInterval(this.TimerBarHandler)}}]),e}();t["default"]=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),o=n(6);n(5),n(3),n(4),n(1);var s=function(){function e(t){i(this,e)}return r(e,[{key:"preload",value:function(){this.game.load.image("tower","assets/images/tower3.png"),this.game.load.image("logo","assets/images/logo.png"),this.game.load.image("towerFilter","assets/images/towerFilter1.png"),this.game.load.image("onelife","assets/images/onelife.png"),this.game.load.image("nolife","assets/images/nolife.png"),this.game.load.image("cloud1","assets/images/cloud1.png"),this.game.load.image("cloud2","assets/images/cloud2.png"),this.game.load.image("arrow","assets/images/arrow1.png")}}]),r(e,[{key:"create",value:function(){this.background,this.gameplay,this.gui,this.cloud,this.timerClouds=0,this.game.time.events.duration,this.cloudSwitch=!0,this.background=this.game.add.physicsGroup(),this.background.stage.backgroundColor="#4ab4e6",this.background.stage.position="absolute",this.cloud=this.background.game.add.physicsGroup();for(var e=0;5>e;e++){var t=this.game.rnd.between(0,800),n=this.game.rnd.between(0,600),i=this.cloud.create(n,t,e%2===0?"cloud1":"cloud2");i.body.velocity.x=this.game.rnd.between(2,10)}this.game.add.sprite(680,0,"logo"),this.game,this.overlay=$('<div class="overlay content-center">\n			<div style="color:#FFF; width:50%">\n				<form class="login">\n					<h1>game over</h1>\n					<p style="padding-bottom: 1em;">your score is '+window.score+"</p>\n				</form>\n			</div>\n		</div>"),this.overlay.appendTo(document.body),this.saveBestScore(window.score)}},{key:"displayLoginForm",value:function(){return new Promise(function(e){var t=$('\n			 	<div id="saveBlock" style="display:flex; width: 100%">\n					<input id="username" type="text" placeholder="your email" style="flex:1; width: 100%" />\n					<input id="loginBtn" type="submit" value="Save your score" disabled style="margin-left:1em" />\n				</div>\n			').on("keyup","input[type=text]",function(e){var t=document.getElementById("loginBtn");t.disabled=!(0,a.isEmail)($(this).val())}).on("click","input[type=submit]",function(t){t.preventDefault();var n=$("#username").val();return n?(localStorage.setItem("login",n),e(n)):void 0});t.appendTo(".overlay .login");var n=localStorage.getItem("login");n&&($("#username").val(n),$("#loginBtn").attr("disabled",!(0,a.isEmail)(n)))})}},{key:"saveBestScore",value:function(e){var t=this,n=void 0;this.displayLoginForm().then(function(e){return n=e,(0,o.getBestScore)(n)}).then(function(i){return e>i?(0,o.saveScore)(n,e).then(function(){t.game.state.start("Menu")}):void t.game.state.start("Menu")})}},{key:"update",value:function(){}},{key:"shutdown",value:function(){this.overlay.remove()}}]),e}();t["default"]=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(6),o=n(2);n(5),n(3),n(4),n(1);var s=function(){function e(t){i(this,e)}return r(e,[{key:"preload",value:function(){this.game.load.image("tower","assets/images/tower3.png"),this.game.load.image("logo","assets/images/logo.png"),this.game.load.image("towerFilter","assets/images/towerFilter1.png"),this.game.load.image("onelife","assets/images/onelife.png"),this.game.load.image("nolife","assets/images/nolife.png"),this.game.load.image("cloud1","assets/images/cloud1.png"),this.game.load.image("cloud2","assets/images/cloud2.png"),this.game.load.image("arrow","assets/images/arrow1.png")}}]),r(e,[{key:"create",value:function(){this.background,this.gameplay,this.gui,this.cloud,this.timerClouds=0,this.game.time.events.duration,this.cloudSwitch=!0,this.background=this.game.add.physicsGroup(),this.background.stage.backgroundColor="#4ab4e6",this.background.stage.position="absolute",this.cloud=this.background.game.add.physicsGroup();for(var e=0;5>e;e++){var t=this.game.rnd.between(0,800),n=this.game.rnd.between(0,600),i=this.cloud.create(n,t,e%2===0?"cloud1":"cloud2");i.body.velocity.x=this.game.rnd.between(2,10)}this.game.add.sprite(680,0,"logo");var r=this.game;this.overlay=$('\n		<div class="overlay content-center">\n			<div style="margin-bottom: 1em;width:50%" class="scoreContent">\n				<table id="scoreTable" class="scores">\n				</table>\n			</div>\n			<form class="menu">\n				<input type="submit" value="play" style="display:block; width: 100%; padding: 10px 3em"/>\n			</form>\n		</div>').on("click","input[type=submit]",function(e){e.preventDefault(),r.state.start("Game")}),this.overlay.appendTo(document.body),this.initBestScores()}},{key:"initBestScores",value:function(){(0,a.getBestScores)().then(function(e){e.length&&!function(){$("<h1>Best players</h1>").prependTo(".scoreContent");var t=document.getElementById("scoreTable"),n=e.map(function(e){return $("\n					<tr>\n						<td>"+(0,o.escapeHtml)(e.name)+"</td>\n						<td>"+e.val+"</td>\n					</tr>\n				")});n.forEach(function(e){return e.appendTo(t)})}()})}},{key:"update",value:function(){}},{key:"shutdown",value:function(){this.overlay.remove()}}]),e}();t["default"]=s},function(e,t,n){t=e.exports=n(13)(),t.push([e.id,"a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,html,i,iframe,img,input,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-style:normal;font-variant:normal;font-weight:500;line-height:20px;height:600px;width:800px}#quizz{text-align:center;display:table;margin:auto;top:0;left:0}#blocQuizz,#quizz{position:absolute;width:400px;height:310px}#blocQuizz{top:150px;left:250px;display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;justify-content:center}.wrapper{display:flex;flex-flow:column;text-align:center;width:400px;box-shadow:3px 3px 1px 1px rgba(0,0,0,.2)}.questionBloc{background-color:#595959;padding:50px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;color:#fff;font-size:40px}.timerBloc{background:#8f8f8f;height:2em}.timeElapsed{background-color:#fbd23e;height:100%}@media all and (min-width:400px){.timerBloc{flex:1 auto}}@media all and (min-width:400px){.wrapper{flex:3 0px}.questionBloc{order:1}.timerBloc{order:2}}.answerBloc{list-style:none;display:flex;flex-direction:row;justify-content:space-around;flex-flow:row;text-align:center;width:400px;margin-top:30px}.bloc1,.bloc2,.bloc3{padding:10px;width:100px;height:100px;background-color:#b5e9f7;box-shadow:3px 3px 1px 1px rgba(0,0,0,.2);font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;color:#595959;font-size:40px;text-align:center;display:flex;align-items:center;justify-content:center}.bloc1:hover,.bloc2:hover,.bloc3:hover{transform:scale(1.05)}.bloc1:active,.bloc2:active,.bloc3:active{transform:scale(1.03)}@media all and (min-width:400px){.answerBloc{flex:3 0px}.bloc1{order:1}.bloc2{order:2}.bloc3{order:3}}body{margin:0;font-size:18px;font-family:arial}.overlay{position:absolute;top:0;left:0;width:800px;height:600px}.content-center{display:flex;align-items:center;justify-content:center;text-align:center;flex-direction:column}.content-center h1{font-size:24px;margin:30px 0}.content-center p{color:#000}form.login{background-color:#fff;padding:1em}input{padding:10px;border:none;border-bottom:2px solid #c9c9c9;transition:border .3s}input:focus{border-bottom:2px solid #969696}h1{text-shadow:3px 3px 1px 1px rgba(0,0,0,.2);color:#000}.required{color:red}.scores{width:100%}.scores td:first-child{text-align:left}.scores td:nth-child(2){text-align:right}","",{version:3,sources:["/./src/assets/styles/index.css"],names:[],mappings:"AAEA,0ZAaC,SAAU,AACV,UAAW,AACX,SAAU,AACV,eAAgB,AAChB,aAAc,AACd,uBAAyB,CACzB,AAED,uEAEC,aAAe,CACf,AACD,KACC,aAAe,CACf,AACD,MACC,eAAiB,CACjB,AACD,aACC,WAAa,CACb,AACD,oDAEC,WAAY,AACZ,YAAc,CACd,AACD,MACC,yBAA0B,AAC1B,gBAAkB,CAClB,AAID,KACC,sDAA4D,AAC5D,eAAgB,AAChB,kBAAmB,AACnB,oBAAqB,AACrB,gBAAiB,AACjB,iBAAkB,AAClB,aAAc,AACd,WAAa,CACb,AAED,OACC,kBAAmB,AACnB,cAAe,AACf,YAAa,AAEb,MAAO,AACP,MAAQ,CAIR,AAED,kBARC,kBAAmB,AAGnB,YAAa,AACb,YAAc,CAed,AAXD,WAEC,UAAW,AACX,WAAY,AAGZ,aAAc,AACd,sBAAuB,AACvB,eAAgB,AAChB,mBAAoB,AACpB,sBAAwB,CACxB,AAED,SACC,aAAc,AACd,iBAAkB,AAClB,kBAAmB,AACnB,YAAa,AACb,yCAA+C,CAC/C,AAED,cACC,yBAA0B,AAC1B,aAAc,AACd,sDAA4D,AAC5D,gBAAkB,AAClB,WAAa,AACb,cAAgB,CAChB,AAED,WACC,mBAAoB,AACpB,UAAY,CACZ,AAED,aACC,yBAA0B,AAC1B,WAAa,CACb,AAED,iCACC,WAAa,WAAa,CAAE,CAC5B,AACD,iCACC,SAAc,UAAY,CAAE,AAC5B,cACC,OAAS,CACT,AACD,WACC,OAAS,CACT,CACD,AAED,YACC,gBAAiB,AACjB,aAAc,AACd,mBAAoB,AACpB,6BAA8B,AAC9B,cAAe,AACf,kBAAmB,AACnB,YAAa,AACb,eAAiB,CACjB,AAED,qBACC,aAAc,AACd,YAAa,AACb,aAAc,AACd,yBAA0B,AAC1B,0CAA+C,AAC/C,sDAA4D,AAC5D,gBAAkB,AAClB,cAAe,AACf,eAAgB,AAChB,kBAAmB,AACnB,aAAc,AACd,mBAAoB,AACpB,sBAAwB,CAExB,AAED,uCACC,qBAAuB,CACvB,AACD,0CACC,qBAAuB,CACvB,AAED,iCACC,YAAiB,UAAY,CAAE,AAC/B,OACC,OAAS,CACT,AACD,OACC,OAAS,CACT,AACD,OACC,OAAS,CACT,CACD,AAED,KACC,SAAU,AACV,eAAgB,AAChB,iBAAmB,CACnB,AAED,SACC,kBAAmB,AACnB,MAAO,AACP,OAAQ,AACR,YAAa,AACb,YAAc,CACd,AAED,gBACC,aAAc,AACd,mBAAoB,AACpB,uBAAwB,AACxB,kBAAmB,AACnB,qBAAuB,CACvB,AACD,mBACC,eAAgB,AAChB,aAA0B,CAC1B,AACD,kBACC,UAAa,CACb,AACD,WACC,sBAAuB,AACvB,WAAa,CACb,AAED,MACC,aAAc,AACd,YAAa,AACb,gCAAiC,AACjC,qBAAwB,CACxB,AAED,YACC,+BAAiC,CACjC,AAED,GACC,2CAAgD,AAChD,UAAa,CACb,AACD,UACC,SAAW,CACX,AAED,QACC,UAAY,CACZ,AAED,uBACC,eAAiB,CACjB,AAED,wBACC,gBAAkB,CAClB",file:"index.css",sourcesContent:["/*--------------------Reset---------------------*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video, input {\n	margin: 0;\n	padding: 0;\n	border: 0;\n	font-size: 100%;\n	font: inherit;\n	vertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, menu, nav, section {\n	display: block;\n}\nbody {\n	line-height: 1;\n}\nol, ul {\n	list-style: none;\n}\nblockquote, q {\n	quotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n	content: '';\n	content: none;\n}\ntable {\n	border-collapse: collapse;\n	border-spacing: 0;\n}\n\n/*--------------------CSS de Calcul Mental---------------------*/\n\nbody{\n	font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n	font-size: 16px;\n	font-style: normal;\n	font-variant: normal;\n	font-weight: 500;\n	line-height: 20px;\n	height: 600px;\n	width: 800px;\n}\n\n#quizz{\n	text-align: center;\n	display: table;\n	margin: auto;\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 400px;\n	height: 310px;\n\n}\n\n#blocQuizz{\n	position: absolute;\n	top: 150px;\n	left: 250px;\n	width: 400px;\n	height: 310px;\n	display: flex;\n	flex-direction: column;\n	flex-wrap: wrap;\n	align-items: center;\n	justify-content: center;\n}\n\n.wrapper{\n	display: flex;\n	flex-flow: column;\n	text-align: center;\n	width: 400px;\n	box-shadow: 3px 3px 1px 1px rgba(0, 0, 0, 0.2);\n}\n\n.questionBloc{\n	background-color: #595959;\n	padding: 50px;\n	font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n	font-weight: bold;\n	color: white;\n	font-size: 40px;\n}\n\n.timerBloc {\n	background: #8f8f8f;\n	height: 2em;\n}\n\n.timeElapsed {\n	background-color: #fbd23e;\n	height: 100%;\n}\n\n@media all and (min-width: 400px) {\n	.timerBloc { flex: 1 auto; }\n}\n@media all and (min-width: 400px) {\n	.wrapper    { flex: 3 0px; }\n	.questionBloc {\n		order: 1;\n	}\n	.timerBloc {\n		order: 2;\n	}\n}\n\n.answerBloc{\n	list-style: none;\n	display: flex;\n	flex-direction: row;\n	justify-content: space-around;\n	flex-flow: row;\n	text-align: center;\n	width: 400px;\n	margin-top: 30px;\n}\n\n.bloc1, .bloc2, .bloc3{\n	padding: 10px;\n	width: 100px;\n	height: 100px;\n	background-color: #b5e9f7;\n	box-shadow: 3px 3px 1px 1px rgba(0, 0, 0, 0.2);\n	font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n	font-weight: bold;\n	color: #595959;\n	font-size: 40px;\n	text-align: center;\n	display: flex;\n	align-items: center;\n	justify-content: center;\n\n}\n\n.bloc1:hover, .bloc2:hover, .bloc3:hover {\n	transform: scale(1.05);\n}\n.bloc1:active, .bloc2:active, .bloc3:active {\n	transform: scale(1.03);\n}\n\n@media all and (min-width: 400px) {\n	.answerBloc    { flex: 3 0px; }\n	.bloc1 {\n		order: 1;\n	}\n	.bloc2 {\n		order: 2;\n	}\n	.bloc3 {\n		order: 3;\n	}\n}\n\nbody {\n	margin: 0;\n	font-size: 18px;\n	font-family: arial;\n}\n\n.overlay {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 800px; \n	height: 600px;\n}\n\n.content-center {\n	display: flex; \n	align-items: center; \n	justify-content: center;\n	text-align: center;\n	flex-direction: column;\n}\n.content-center h1{\n	font-size: 24px;\n	margin: 30px 0px 30px 0px;\n}\n.content-center p{\n	color: black;\n}\nform.login {\n	background-color: #FFF;\n	padding: 1em;\n}\n\ninput {\n	padding: 10px;\n	border: none;\n	border-bottom: solid 2px #c9c9c9;\n	transition: border 0.3s;\n}\n\ninput:focus {\n	border-bottom: solid 2px #969696;\n}\n\nh1{\n	text-shadow: 3px 3px 1px 1px rgba(0, 0, 0, 0.2);\n	color: black;\n}\n.required {\n	color: red;\n}\n\n.scores {\n	width: 100%;\n}\n\n.scores td:first-child {\n	text-align: left;\n}\n\n.scores td:nth-child(2) {\n	text-align: right;\n}"],sourceRoot:"webpack://"}])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(e,t,n){e.exports=n.p+"assets/images/arrow1.png"},function(e,t,n){e.exports=n.p+"assets/images/nolife.png"},function(e,t,n){e.exports=n.p+"assets/images/onelife.png"},function(e,t,n){e.exports=n.p+"assets/images/tower3.png"},function(e,t,n){e.exports=n.p+"assets/images/towerFilter1.png"},,,,,,function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=f[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(l(i.parts[a],t))}else{for(var o=[],a=0;a<i.parts.length;a++)o.push(l(i.parts[a],t));f[i.id]={id:i.id,refs:1,parts:o}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],a=r[0],o=r[1],s=r[2],u=r[3],l={css:o,media:s,sourceMap:u};n[a]?n[a].parts.push(l):t.push(n[a]={id:a,parts:[l]})}return t}function a(e,t){var n=g(),i=_[_.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",a(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",a(e,t),t}function l(e,t){var n,i,r;if(t.singleton){var a=m++;n=y||(y=s(t)),i=c.bind(null,n,a,!1),r=c.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),i=d.bind(null,n),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=h.bind(null,n),r=function(){o(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function c(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function h(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}var f={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=p(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,m=0,_=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=v()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],u=f[s.id];u.refs--,a.push(u)}if(e){var l=r(e);i(l,t)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete f[u.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){!function(n){if("object"==typeof t&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.Webcom=n()}}(function(){return function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t){"use strict";t.exports={"default":Object.create,__esModule:!0}},{}],2:[function(e,t){"use strict";t.exports={"default":Object.defineProperty,__esModule:!0}},{}],3:[function(e,t){"use strict";t.exports={"default":Object.getOwnPropertyDescriptor,__esModule:!0}},{}],4:[function(e,t){"use strict";t.exports={"default":Object.keys,__esModule:!0}},{}],5:[function(e,t){(function(n){"use strict";var i="undefined"==typeof window?n:window;t.exports={"default":i.Promise||e(13),__esModule:!0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{13:13}],6:[function(e,t,n){"use strict";n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n.__esModule=!0},{}],7:[function(e,t,n){"use strict";var i=e(2)["default"];n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n.__esModule=!0},{2:2}],8:[function(e,t,n){"use strict";var i=e(3)["default"];n["default"]=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;u=c=l=void 0,r=!1;var u=i(a,o);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(s)}var c=Object.getPrototypeOf(a);if(null===c)return;e=c,t=o,n=s,r=!0}},n.__esModule=!0},{3:3}],9:[function(e,t,n){"use strict";var i=e(1)["default"];n["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=i(t&&t.prototype,{constructor:{value:e,enumerable:!1,
writable:!0,configurable:!0}}),t&&(e.__proto__=t)},n.__esModule=!0},{1:1}],10:[function(e,t,n){"use strict";n["default"]=function(e){return e&&e.__esModule?e:{"default":e}},n.__esModule=!0},{}],11:[function(e,t,n){"use strict";n["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t},n.__esModule=!0},{}],12:[function(e,t,n){"use strict";n["default"]=Array.prototype.slice,n.__esModule=!0},{}],13:[function(e,t){!function(e){function n(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,n(a,this),n(o,this))}function r(e){var t=this;return null===this._state?void this._deferreds.push(e):void c(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var i;try{i=n(t._value)}catch(r){return void e.reject(r)}e.resolve(i)})}function a(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(n(t,e),n(a,this),n(o,this))}this._state=!0,this._value=e,s.call(this)}catch(i){o.call(this,i)}}function o(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;t>e;e++)r.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function l(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(r){if(i)return;i=!0,n(r)}}var c=i.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=this;return new i(function(i,a){r.call(n,new u(e,t,i,a))})},i.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new i(function(t,n){function i(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){i(a,e)},n)}e[a]=o,0===--r&&t(e)}catch(u){n(u)}}if(0===e.length)return t([]);for(var r=e.length,a=0;a<e.length;a++)i(a,e[a])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var i=0,r=e.length;r>i;i++)e[i].then(t,n)})},"undefined"!=typeof t&&t.exports?t.exports=i:e.Promise||(e.Promise=i)}(this)},{}],14:[function(e,t,n){"use strict";var i=e(9)["default"],r=e(8)["default"],a=e(7)["default"],o=e(6)["default"],s=e(10)["default"],u=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var l=e(17),c=s(l),h=e(18),d=s(h),f=e(20),p=s(f),v=e(44),g=s(v),y=e(22),m=s(y),_=e(38),b=u(_),C=e(77),A=u(C),k=e(41),w=e(49),E=u(w),S=e(81),N=e(78),D=u(N),P=e(79),T=e(58),R=s(T),x=function(e){function t(e,n){o(this,t);var i,a;if(e instanceof p["default"])i=e,a=n;else{S.validateArgCount("new Webcom",1,2,arguments.length);var s,u=b.parseURL(arguments[0]);if(E.validateUrl("new Webcom",1,u),n){if(!(n instanceof m["default"]))throw new Error("Expected a valid Webcom.Context for second argument to new Webcom()");s=n}else s=m["default"].getInstance();i=s.getRepo(u.repoInfo),a=u.path}r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,i,a)}return i(t,e),a(t,[{key:"name",value:function(){return S.validateArgCount("Webcom.name",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()}},{key:"child",value:function(e){return S.validateArgCount("Webcom.child",1,1,arguments.length),A.isNumber(e)?e=String(e):e instanceof g["default"]||(null===this.path.getFront()?E.validateRootPathString("Webcom.child",1,e,!1):E.validatePathString("Webcom.child",1,e,!1)),new t(this.repo,this.path.child(e))}},{key:"parent",value:function(){S.validateArgCount("Webcom.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)}},{key:"root",value:function(){S.validateArgCount("Webcom.ref",0,0,arguments.length);for(var e=this;null!==e.parent();)e=e.parent();return e}},{key:"toString",value:function(){return S.validateArgCount("Webcom.toString",0,0,arguments.length),null===this.parent()?this.repo.toString():this.parent().toString()+"/"+P.urlEncode(this.name())}},{key:"set",value:function(e,t){S.validateArgCount("Webcom.set",1,2,arguments.length),w.validateWritablePath("Webcom.set",this.path),w.validateWebcomDataArg("Webcom.set",1,e,!1),S.validateCallback("Webcom.set",2,t,!0),this.repo.setWithPriority(this.path,e,null,t)}},{key:"update",value:function(e,t){if(S.validateArgCount("Webcom.update",1,2,arguments.length),w.validateWritablePath("Webcom.update",this.path),A.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,b.warn("Passing an Array to Webcom.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}if(E.validateWebcomObjectDataArg("Webcom.update",1,e,!1),S.validateCallback("Webcom.update",2,t,!0),D.contains(e,".priority"))throw new Error("update() does not currently support updating .priority.");this.repo.update(this.path,e,t)}},{key:"setWithPriority",value:function(e,t,n){if(S.validateArgCount("Webcom.setWithPriority",2,3,arguments.length),w.validateWritablePath("Webcom.setWithPriority",this.path),w.validateWebcomDataArg("Webcom.setWithPriority",1,e,!1),E.validatePriority("Webcom.setWithPriority",2,t,!1),S.validateCallback("Webcom.setWithPriority",3,n,!0),".length"===this.name()||".keys"===this.name())throw"Webcom.setWithPriority failed: "+this.name()+" is a read-only object.";this.repo.setWithPriority(this.path,e,t,n)}},{key:"remove",value:function(e){S.validateArgCount("Webcom.remove",0,1,arguments.length),w.validateWritablePath("Webcom.remove",this.path),S.validateCallback("Webcom.remove",1,e,!0),this.set(null,e)}},{key:"transaction",value:function(e,t,n){if(S.validateArgCount("Webcom.transaction",1,3,arguments.length),w.validateWritablePath("Webcom.transaction",this.path),S.validateCallback("Webcom.transaction",1,e,!1),S.validateCallback("Webcom.transaction",2,t,!0),E.validateBoolean("Webcom.transaction",3,n,!0),".length"===this.name()||".keys"===this.name())throw"Webcom.transaction failed: "+this.name()+" is a read-only object.";"undefined"==typeof n&&(n=!0),this.repo.startTransaction(this.path,e,t,n)}},{key:"setPriority",value:function(e,t){S.validateArgCount("Webcom.setPriority",1,2,arguments.length),w.validateWritablePath("Webcom.setPriority",this.path),E.validatePriority("Webcom.setPriority",1,e,!1),S.validateCallback("Webcom.setPriority",2,t,!0),this.repo.setPriority(this.path,e,t)}},{key:"push",value:function(e,t){S.validateArgCount("Webcom.push",0,2,arguments.length),w.validateWritablePath("Webcom.push",this.path),w.validateWebcomDataArg("Webcom.push",1,e,!0),S.validateCallback("Webcom.push",2,t,!0);var n=this.repo.serverTime(),i=k.NextPushId(n),r=this.child(i);return"undefined"!=typeof e&&null!==e&&r.set(e,t),r}},{key:"onDisconnect",value:function(){return new c["default"](this.repo,this.path,this.name())}},{key:"removeOnDisconnect",value:function(){b.warn("WebcomRef.removeOnDisconnect() being deprecated. Please use WebcomRef.onDisconnect().remove() instead."),this.onDisconnect().remove(),this.repo.logOnDisconnectDeprecatedSignature()}},{key:"setOnDisconnect",value:function(e){b.warn("WebcomRef.setOnDisconnect(value) being deprecated. Please use WebcomRef.onDisconnect().set(value) instead."),this.onDisconnect().set(e),this.repo.logOnDisconnectDeprecatedSignature()}},{key:"auth",value:function(e,t,n){S.validateArgCount("Webcom.auth",1,3,arguments.length),E.validateCredential("Webcom.auth",1,e,!1),S.validateCallback("Webcom.auth",2,t,!0),S.validateCallback("Webcom.auth",3,t,!0),this.repo.auth(e,t,n)}},{key:"unauth",value:function(e){S.validateArgCount("Webcom.unauth",0,1,arguments.length),S.validateCallback("Webcom.unauth",1,e,!0),this.repo.unauth(e)}},{key:"resume",value:function(e){this.getAuthClient(!1,e).resumeSession()}},{key:"goOffline",value:function(){S.validateArgCount("Webcom.goOffline",0,0,arguments.length),m["default"].getInstance().interrupt()}},{key:"goOnline",value:function(){S.validateArgCount("Webcom.goOnline",0,0,arguments.length),m["default"].getInstance().resume()}},{key:"getAuthClient",value:function(e,t,n){return this.client_?t&&R["default"].registerCallback(t,n):(this.client_=new R["default"](this,t,n,this.repo.internalHostUrl()),e&&this.client_.resumeSession()),this.client_}},{key:"authAnonymously",value:function(e,t){return this.getAuthClient(!0,e,t).login("anonymous")}},{key:"authWithPassword",value:function(e,t,n){return this.getAuthClient(!0,t,n).login("password",e)}},{key:"authWithTwitter",value:function(e,t,n){return this.getAuthClient(!0,t,n).login("twitter",e)}},{key:"authWithTwitterToken",value:function(e,t,n){return this.getAuthClient(!0,t,n).login("twitter-token",e)}},{key:"authWithGoogle",value:function(e,t,n){return this.getAuthClient(!0,t,n).login("google",e)}},{key:"authWithGoogleToken",value:function(e,t,n){return this.getAuthClient(!0,t,n).login("google-token",e)}},{key:"authWithFacebook",value:function(e,t,n){return this.getAuthClient(!0,t,n).login("facebook",e)}},{key:"authWithFacebookToken",value:function(e,t,n){return this.getAuthClient(!0,t,n).login("facebook-token",e)}},{key:"authWithGithub",value:function(e,t,n){return this.getAuthClient(!0,t,n).login("github",e)}},{key:"createUser",value:function(e,t,n){var i="Webcom:createUser";return S.validateArgCount(i,2,3,arguments.length),S.validateCallback(i,3,n,!0),this.getAuthClient(!0).createUser(e,t,n)}},{key:"changePassword",value:function(e,t,n,i){var r="Webcom:changePassword";return S.validateArgCount(r,3,4,arguments.length),S.validateCallback(r,4,i,!0),this.getAuthClient(!0).changePassword(e,t,n,i)}},{key:"removeUser",value:function(e,t,n){var i="Webcom:removeUser";return S.validateArgCount(i,2,3,arguments.length),S.validateCallback(i,3,n,!0),this.getAuthClient(!0).removeUser(e,t,n)}},{key:"sendPasswordResetEmail",value:function(e,t){var n="Webcom:sendPasswordResetEmail";return S.validateArgCount(n,1,2,arguments.length),S.validateCallback(n,2,t,!0),this.getAuthClient(!0).sendPasswordResetEmail(e,t)}},{key:"logout",value:function(e){S.validateArgCount("Webcom:logout",0,1,arguments.length),this.getAuthClient(!1).logout(e)}}]),t}(d["default"]);n.Webcom=x,n["default"]=x},{10:10,11:11,17:17,18:18,20:20,22:22,38:38,41:41,44:44,49:49,58:58,6:6,7:7,77:77,78:78,79:79,8:8,81:81,9:9}],15:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e(44),s=a(o),u=e(49),l=e(81),c=e(77),h=function(){function e(t,n){r(this,e),this.ref_=n,this.node_=t}return i(e,[{key:"val",value:function(){return l.validateArgCount("Webcom.DataSnapshot.val",0,0,arguments.length),this.node_.val()}},{key:"exportVal",value:function(){return l.validateArgCount("Webcom.DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)}},{key:"child",value:function(t){l.validateArgCount("Webcom.DataSnapshot.child",0,1,arguments.length),c.isNumber(t)&&(t=String(t)),u.validatePathString("Webcom.DataSnapshot.child",1,t,!1);var n=new s["default"](t),i=this.ref_.child(n);return new e(this.node_.getChild(n),i)}},{key:"hasChild",value:function(e){l.validateArgCount("Webcom.DataSnapshot.hasChild",1,1,arguments.length),u.validatePathString("Webcom.DataSnapshot.hasChild",1,e,!1);var t=new s["default"](e);return!this.node_.getChild(t).isEmpty()}},{key:"getPriority",value:function(){return l.validateArgCount("Webcom.DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority()}},{key:"forEach",value:function(t){if(l.validateArgCount("Webcom.DataSnapshot.forEach",1,1,arguments.length),l.validateCallback("Webcom.DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var n=this;return this.node_.forEachChild(function(i,r){return t(new e(r,n.ref_.child(i)))})}},{key:"hasChildren",value:function(){return l.validateArgCount("Webcom.DataSnapshot.hasChildren",0,0,arguments.length),this.node_.isLeafNode()?!1:!this.node_.isEmpty()}},{key:"name",value:function(){return l.validateArgCount("Webcom.DataSnapshot.name",0,0,arguments.length),this.ref_.name()}},{key:"numChildren",value:function(){return l.validateArgCount("Webcom.DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()}},{key:"ref",value:function(){return l.validateArgCount("Webcom.DataSnapshot.ref",0,0,arguments.length),this.ref_}}]),e}();n["default"]=h,t.exports=n["default"]},{10:10,44:44,49:49,6:6,7:7,77:77,81:81}],16:[function(e,t,n){"use strict";function i(e){var t=m["default"].prototype.hash;m["default"].prototype.hash=e;var n=A["default"].prototype.hash;return A["default"].prototype.hash=e,function(){m["default"].prototype.hash=t,A["default"].prototype.hash=n}}function r(e){return e.queryIdentifier()}function a(e){return e.repo.connection_.listens_}function o(e){return e.repo.connection_.realtime_}function s(e,t){e.repo.connection_.securityDebugCallback_=t}function u(e,t){e.repo.stats(t)}function l(e,t){e.repo.statsIncrementCounter(t)}function c(e){return e.repo.dataUpdateCount}function h(e,t){return e.repo.interceptServerData_(t)}var d=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.hijackHash=i,n.queryIdentifier=r,n.listens=a,n.refConnection=o,n.setSecurityDebugCallback=s,n.stats=u,n.statsIncrementCounter=l,n.dataUpdateCount=c,n.interceptServerData=h;var f=e(19),p=d(f),v=e(21),g=d(v),y=e(28),m=d(y),_=e(30),b=d(_),C=e(29),A=d(C),k=e(66),w=d(k),E=e(35);n.DataConnection=p["default"],n.RealTimeConnection=w["default"],n.ConnectionTarget=g["default"],n.PersistentStorage=E.PersistentStorage,n.SortedChildrenNode=b["default"],n["default"]={hijackHash:i,queryIdentifier:r,listens:a,refConnection:o,setSecurityDebugCallback:s,stats:u,statsIncrementCounter:l,dataUpdateCount:c,interceptServerData:h,DataConnection:p["default"],RealTimeConnection:w["default"],ConnectionTarget:g["default"],PersistentStorage:E.PersistentStorage,SessionStorage:E.SessionStorage,SortedChildrenNode:b["default"]}},{10:10,19:19,21:21,28:28,29:29,30:30,35:35,66:66}],17:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(38),o=e(49),s=e(81),u=e(77),l=function(){function e(t,n,i){r(this,e),this.repo_=t,this.path_=n,this.name_=i}return i(e,[{key:"cancel",value:function(e){s.validateArgCount("Webcom. onDisconnect().cancel",0,1,arguments.length),s.validateCallback("Webcom. onDisconnect().cancel",1,e,!0),this.repo_.onDisconnectCancel(this.path_,e)}},{key:"remove",value:function(e){s.validateArgCount("Webcom. onDisconnect().remove",0,1,arguments.length),o.validateWritablePath("Webcom. onDisconnect().remove",this.path_),s.validateCallback("Webcom. onDisconnect().remove",1,e,!0),this.repo_.onDisconnectSet(this.path_,null,e)}},{key:"set",value:function(e,t){s.validateArgCount("Webcom. onDisconnect().set",1,2,arguments.length),o.validateWritablePath("Webcom. onDisconnect().set",this.path_),o.validateWebcomDataArg("Webcom. onDisconnect().set",1,e,!1),s.validateCallback("Webcom. onDisconnect().set",2,t,!0),this.repo_.onDisconnectSet(this.path_,e,t)}},{key:"setWithPriority",value:function(e,t,n){if(s.validateArgCount("Webcom. onDisconnect().setWithPriority",2,3,arguments.length),o.validateWritablePath("Webcom. onDisconnect().setWithPriority",this.path_),o.validateWebcomDataArg("Webcom. onDisconnect().setWithPriority",1,e,!1),o.validatePriority("Webcom. onDisconnect().setWithPriority",2,t,!1),s.validateCallback("Webcom. onDisconnect().setWithPriority",3,n,!0),".length"===this.name_||".keys"===this.name_)throw"Webcom. onDisconnect().setWithPriority failed: "+this.name_+" is a read-only object.";this.repo_.onDisconnectSetWithPriority(this.path_,e,t,n)}},{key:"update",value:function(e,t){if(s.validateArgCount("Webcom. onDisconnect().update",1,2,arguments.length),o.validateWritablePath("Webcom. onDisconnect().update",this.path_),u.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,a.warn("Passing an Array to Webcom. onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}o.validateWebcomObjectDataArg("Webcom. onDisconnect().update",1,e,!1),s.validateCallback("Webcom. onDisconnect().update",2,t,!0),this.repo_.onDisconnectUpdate(this.path_,e,t)}}]),e}();n["default"]=l,t.exports=n["default"]},{38:38,49:49,6:6,7:7,77:77,81:81}],18:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(38),o=e(49),s=e(81),u=e(76),l=e(77),c=function(){function e(t,n,i,a,o,s,u){if(r(this,e),this.repo=t,this.path=n,this.itemLimit=i,this.startPriority=a,this.startName=o,this.endPriority=s,this.endName=u,l.isDef(this.startPriority)&&l.isDef(this.endPriority)&&l.isDef(this.itemLimit))throw"Query: Can't combine startAt(), endAt(), and limit()."}return i(e,[{key:"ref",value:function(){return s.validateArgCount("Query.ref",0,0,arguments.length),new Webcom(this.repo,this.path)}},{key:"on",value:function(e,t,n,i){s.validateArgCount("Query.on",2,4,arguments.length),o.validateEventType("Query.on",1,e,!1),s.validateCallback("Query.on",2,t,!1);var r=this.getCancelAndContextArgs_("Query.on",n,i);return this.repo.addEventCallbackForQuery(this,e,t,r.cancel,r.context),t}},{key:"off",value:function(e,t,n){s.validateArgCount("Query.off",0,3,arguments.length),o.validateEventType("Query.off",1,e,!0),s.validateCallback("Query.off",2,t,!0),s.validateContextObject("Query.off",3,n,!0),this.repo.removeEventCallbackForQuery(this,e,t,n)}},{key:"once",value:function(e,t,n,i){s.validateArgCount("Query.once",2,4,arguments.length),o.validateEventType("Query.once",1,e,!1),s.validateCallback("Query.once",2,t,!1);var r=this.getCancelAndContextArgs_("Query.once",n,i),a=this,l=!0,c=function h(n){l&&(l=!1,a.off(e,h),u.bind(t,r.context)(n))};this.on(e,c,function(t){a.off(e,c),r.cancel&&u.bind(r.cancel,r.context)(t)})}},{key:"limit",value:function(t){if(s.validateArgCount("Query.limit",1,1,arguments.length),!l.isNumber(t)||Math.floor(t)!==t||0>=t)throw"Query.limit: First argument must be a positive integer.";return new e(this.repo,this.path,t,this.startPriority,this.startName,this.endPriority,this.endName)}},{key:"startAt",value:function(t,n){return s.validateArgCount("Query.startAt",0,2,arguments.length),o.validatePriority("Query.startAt",1,t,!0),o.validateKey("Query.startAt",2,n,!0),l.isDef(t)||(t=null,n=null),new e(this.repo,this.path,this.itemLimit,t,n,this.endPriority,this.endName)}},{key:"endAt",value:function(t,n){return s.validateArgCount("Query.endAt",0,2,arguments.length),o.validatePriority("Query.endAt",1,t,!0),o.validateKey("Query.endAt",2,n,!0),new e(this.repo,this.path,this.itemLimit,this.startPriority,this.startName,t,n)}},{key:"equalTo",value:function(e,t){return s.validateArgCount("Query.equalTo",1,2,arguments.length),o.validatePriority("Query.equalTo",1,e,!1),o.validateKey("Query.equalTo",2,t,!0),this.startAt(e,t).endAt(e,t)}},{key:"queryObject",value:function(){var e={};return l.isDef(this.startPriority)&&(e.sp=this.startPriority),l.isDef(this.startName)&&(e.sn=this.startName),l.isDef(this.endPriority)&&(e.ep=this.endPriority),l.isDef(this.endName)&&(e.en=this.endName),l.isDef(this.itemLimit)&&(e.l=this.itemLimit),l.isDef(this.startPriority)&&l.isDef(this.startName)&&null===this.startPriority&&null===this.startName&&(e.vf="l"),e}},{key:"queryIdentifier",value:function(){var e=this.queryObject(),t=a.objectToUniqueKey(e);return"{}"===t?"default":t}},{key:"getCancelAndContextArgs_",value:function(e,t,n){var i={};if(t&&n)i.cancel=t,s.validateCallback(e,3,i.cancel,!0),i.context=n,s.validateContextObject(e,4,i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error(s.errorPrefix_(e,3,!0)+"must either be a cancel callback or a context object.");i.cancel=t}return i}}]),e}();n["default"]=c,t.exports=n["default"]},{38:38,49:49,6:6,7:7,76:76,77:77,81:81}],19:[function(e,t,n){(function(i){"use strict";var r=e(7)["default"],a=e(6)["default"],o=e(10)["default"],s=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u=e(43),l=o(u),c=e(48),h=o(c),d=e(44),f=o(d),p=e(66),v=o(p),g=e(38),y=s(g),m=e(78),_=e(77),b=e(75),C=e(76),A=s(C),k=1e3,w=0,E=0,S=function(){function e(t,n,r,o,s,u){a(this,e),this.id=w++,this.log_=y.logWrapper("p:"+this.id+":"),this.shouldReconnect_=!0,this.listens_={},this.outstandingPuts_=[],this.outstandingPutCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=k,this.maxReconnectDelay_=3e5,this.onDataUpdate_=n||A.nullFunction,this.onConnectStatus_=r||A.nullFunction,this.onAuthStatus_=o||A.nullFunction,this.onServerInfoUpdate_=s||A.nullFunction,this.getServerDataHashForPath_=u||A.nullFunction,this.repoInfo_=t,this.securityDebugCallback_=null,this.requestCBHash_={},this.requestNumber_=0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,this.scheduleConnect_(0),h["default"].getInstance().on("visible",this.onVisible_,this),-1!==t.host.indexOf("fblocal")||"__karma__"in(i||window)||l["default"].getInstance().on("online",this.onOnline_,this)}return r(e,[{key:"sendRequest_",value:function(e,t,n){var i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(JSON.stringify(r)),y.assert(this.connected_,"sendRequest_ call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}},{key:"listen",value:function(e,t){var n=e.toString(),i=e.path().toString();this.listens_[i]=this.listens_[i]||{},y.assert(!this.listens_[i][n],"listen() called twice for same path/queryId."),this.listens_[i][n]={queries:e.queries(),onComplete:t},this.connected_&&this.sendListen_(i,n,e.queries(),t)}},{key:"sendListen_",value:function(e,t,n,i){var r=this;this.log_("Listen on "+e+" for "+t);var a={p:e},o=b.map(n,function(e){return e.queryObject()});"{}"!==t&&(a.q=o),a.h=this.getServerDataHashForPath_(e),this.sendRequest_("l",a,function(n){r.log_("listen response",n);var a=n.s;"ok"!==a&&r.removeListen_(e,t),i&&i(a)})}},{key:"auth",value:function(e,t,n){this.credential_={cred:e,firstRequestSent:!1,callback:t,cancelCallback:n},this.log_("Authenticating using credential: "+this.credential_),this.tryAuth(),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){var t=40===e.length;(t||this.isAdminAuthToken_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"isAdminAuthToken_",value:function(e){var t;try{var n=e.split(".");if(3!==n.length)return!1;var i=y.base64DecodeIfNativeSupport(n[1]);null!==i&&(t=JSON.parse(i))}catch(r){y.log("isAdminAuthToken_ failed",r)}return"object"==typeof t&&m.get(t,"admin")===!0}},{key:"unauth",value:function(e){delete this.credential_,this.onAuthStatus_(!1),this.connected_&&this.sendRequest_("unauth",{},function(t){var n=t.s,i=t.d;e(n,i)})}},{key:"tryAuth",value:function(){var e=this.credential_,t=this;if(this.connected_&&e){var n={cred:e.cred};this.sendRequest_("auth",n,function(n){var i=n.s,r=n.d||"error";"ok"!==i&&t.credential_===e&&delete t.credential_,t.onAuthStatus_("ok"===i),e.firstRequestSent?"ok"!==i&&e.cancelCallback&&e.cancelCallback(i,r):(e.firstRequestSent=!0,e.callback&&e.callback(i,r))})}}},{key:"unlisten",value:function(e,t,n){var i=e.toString(),r=this.removeListen_(i,t);r&&this.connected_&&this.sendUnlisten_(i,t,n)}},{key:"sendUnlisten_",value:function(e,t,n){this.log_("Unlisten on "+e+" for "+t);var i={p:e},r=b.map(n,function(e){return e.queryObject()});"{}"!==t&&(i.q=r),this.sendRequest_("u",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,i){var r=this,a={p:t,d:n};r.log_("onDisconnect "+e,a),this.sendRequest_(e,a,function(e){i&&setTimeout(function(){i(e.s,e.d)},Math.floor(0))})}},{key:"put",value:function(e,t,n,i){this.putInternal("p",e,t,n,i)}},{key:"merge",value:function(e,t,n,i){this.putInternal("m",e,t,n,i)}},{key:"putInternal",value:function(e,t,n,i,r){var a={p:t,d:n};_.isDef(r)&&(a.h=r),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_&&this.sendPut_(o)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest_(n,i,function(i){t.log_(n+" response",i),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),r&&r(i.s,i.d)})}},{key:"reportStats",value:function(e){if(this.connected_){var t={c:e};this.log_("reportStats",t),this.sendRequest_("s",t)}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+JSON.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1):"m"===e?this.onDataUpdate_(t.p,t.d,!0):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):y.error("Unrecognized action received from server: "+JSON.stringify(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=Date.now(),this.handleTimestamp_(e),this.restoreState_(),this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){y.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_);var t=this;this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=k,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online.  Reconnecting."),this.reconnectDelay_=k,this.shouldReconnect_=!0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection; don't reconnect."),this.shouldReconnect_=!1,this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.shouldReconnect_){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=Date.now()-this.lastConnectionEstablishedTime_;e>3e4&&(this.reconnectDelay_=k),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=Date.now();var t=Date.now()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}else for(var i in this.requestCBHash_)delete this.requestCBHash_[i];this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){if(this.shouldReconnect_){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=Date.now(),this.lastConnectionEstablishedTime_=null;var e=A.bind(this.onDataMessage_,this),t=A.bind(this.onReady_,this),n=A.bind(this.onRealtimeDisconnect_,this),i=this.id+":"+E++,r=this;this.realtime_=new v["default"](i,this.repoInfo_,e,t,n,function(e){y.warn(e+" ("+r.repoInfo_.toString()+")"),r.shouldReconnect_=!1})}}},{key:"interrupt",value:function(){this.shouldReconnect_=!1,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(){this.shouldReconnect_=!0,this.reconnectDelay_=k,this.connected_||this.scheduleConnect_(0)}},{key:"handleTimestamp_",value:function(e){var t=e-Date.now();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?b.map(t,function(e){return y.ObjectToUniqueKey(e)}).join("$"):"{}";var i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n=new f["default"](e).toString();t||(t="{}");var i=this.listens_[n][t];return delete this.listens_[n][t],i}},{key:"onAuthRevoked_",value:function(e,t){var n=this.credential_;delete this.credential_,n&&n.cancelCallback&&n.cancelCallback(e,t),this.onAuthStatus_(!1)}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&"undefined"!=typeof console&&console.log("WEBCOM: "+e.msg.replace("\n","WEBCOM: "))}},{key:"restoreState_",value:function(){this.tryAuth();for(var e in this.listens_)for(var t in this.listens_[e]){var n=this.listens_[e][t];this.sendListen_(e,t,n.queries,n.onComplete)}for(var i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){var r=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(r.action,r.pathString,r.data,r.onComplete)}}}]),e}();n["default"]=S,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,11:11,38:38,43:43,44:44,48:48,6:6,66:66,7:7,75:75,76:76,77:77,78:78}],20:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(11)["default"],o=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=e(33),u=a(s),l=e(34),c=o(l),h=e(32),d=o(h),f=e(19),p=o(f),v=e(26),g=o(v),y=e(25),m=o(y),_=e(23),b=o(_),C=e(24),A=o(C),k=e(44),w=o(k),E=e(45),S=a(E),N=e(27),D=e(38),P=e(77),T=e(76),R=e(78),x=a(R),O=e(75),I=a(O),M=e(15),B=o(M),W=e(47),L=o(W),j=e(49),F={RUN:1,SENT:2,COMPLETED:3,SENT_NEEDS_ABORT:4,NEEDS_ABORT:5},U=function(){function e(t){r(this,e),this.repoInfo_=t,this.stats_=u.getCollection(t),this.connection_=new p["default"](this.repoInfo_,T.bind(this.onDataUpdate_,this),T.bind(this.onConnectStatus_,this),T.bind(this.onAuthStatus_,this),T.bind(this.onServerInfoUpdate_,this),T.bind(this.getServerDataHashForPath_,this)),this.statsReporter_=u.getOrCreateReporter(t,T.bind(function(){
return new c["default"](this.stats_,this.connection_)},this)),this.transactions_init_&&this.transactions_init_(),this.data_=new g["default"],this.viewManager_=new m["default"](this.connection_,this.data_.visibleData),this.infoData_=new b["default"],this.infoViewManager_=new m["default"](null,this.infoData_),this.updateInfo_("connected",!1),this.updateInfo_("authenticated",!1),this.onDisconnect_=new A["default"],this.dataUpdateCount=0}return i(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}},{key:"protocol",value:function(){return this.repoInfo_.secure?"https://":"http://"}},{key:"name",value:function(){return this.repoInfo_.namespace}},{key:"host",value:function(){return this.repoInfo_.host}},{key:"internalHostUrl",value:function(){return this.repoInfo_.needsQueryParam()?this.protocol()+this.repoInfo_.internalHost:null}},{key:"serverTime",value:function(){var e=this.infoData_.getNode(new w["default"](".info/serverTimeOffset")),t=e.val()||0;return Date.now()+t}},{key:"generateServerValues",value:function(){return S.generateWithValues({timestamp:this.serverTime()})}},{key:"onDataUpdate_",value:function(e,t,n){this.dataUpdateCount++,this.interceptServerDataCallback_&&(t=this.interceptServerDataCallback_(e,t));var i,r,a=[];e.length>=9&&e.lastIndexOf(".priority")===e.length-9?(i=new w["default"](e.substring(0,e.length-9)),r=this.data_.serverData.getNode(i).updatePriority(t),a.push(i)):n?(i=new w["default"](e),r=this.data_.serverData.getNode(i),x.forEach(t,function(e,t){var n=new w["default"](t);".priority"===t?r=r.updatePriority(e):(r=r.updateChild(n,N.NodeFromJSON(e)),a.push(i.child(t)))})):(i=new w["default"](e),r=N.NodeFromJSON(t),a.push(i));for(var o=this.viewManager_.pruneUpdateNode(i,r,this.data_.mergedData,n?t:null),s=!1,u=0;u<o.length;++u){var l=o[u];s=this.data_.updateServerData(l.path,l.node)||s}s&&(i=this.rerunTransactionsAndUpdateVisibleData_(i)),this.viewManager_.raiseEventsForChange(i,a)}},{key:"interceptServerData_",value:function(e){this.interceptServerDataCallback_=e}},{key:"onConnectStatus_",value:function(e){this.updateInfo_("connected",e),e===!1&&this.runOnDisconnectEvents_()}},{key:"onServerInfoUpdate_",value:function(e){var t=this;D.each(e,function(e,n){t.updateInfo_(n,e)})}},{key:"getServerDataHashForPath_",value:function(e){var t=new w["default"](e);return this.data_.serverData.getNode(t).hash()}},{key:"onAuthStatus_",value:function(e){this.updateInfo_("authenticated",e)}},{key:"updateInfo_",value:function(e,t){var n=new w["default"]("/.info/"+e);this.infoData_.updateSnapshot(n,N.NodeFromJSON(t)),this.infoViewManager_.raiseEventsForChange(n,[n])}},{key:"auth",value:function(e,t,n){var i=this;this.connection_.auth(e,function(e,n){i.callOnCompleteCallback(t,e,n)},function(e,t){if(D.warn("auth() was canceled: "+t),n){var i=new Error(t);i.code=e.toUpperCase(),n(i)}})}},{key:"unauth",value:function(e){var t=this;this.connection_.unauth(function(n,i){t.callOnCompleteCallback(e,n,i)})}},{key:"setWithPriority",value:function(e,t,n,i){this.log_("set",{path:e.toString(),value:t,priority:n});var r=this.generateServerValues(),a=N.NodeFromJSON(t,n),o=S.resolveDeferredValueSnapshot(a,r),s=this.viewManager_.pruneUpdateNode(e,o,this.data_.mergedData,null),u=this.data_.set(e,s),l=this;this.connection_.put(e.toString(),a.val(!0),function(t,n){"ok"!==t&&D.warn("set at "+e+" failed: "+t),l.data_.setCompleted(u),l.data_.mergeServerAndPendingData(e);var r=l.rerunTransactionsAndUpdateVisibleData_(e);l.viewManager_.raiseEventsForChange(r,[]),l.callOnCompleteCallback(i,t,n)});var c=this.abortTransactions_(e);this.rerunTransactionsAndUpdateVisibleData_(c),this.viewManager_.raiseEventsForChange(c,[e])}},{key:"update",value:function(e,t,n){this.log_("update",{path:e.toString(),value:t});var i=this.data_.visibleData.getNode(e),r=!0,a=[],o=this.generateServerValues(),s=[];for(var u in t){r=!1;var l=N.NodeFromJSON(t[u]),c=S.resolveDeferredValueSnapshot(l,o);i=i.updateImmediateChild(u,c);var h=e.child(u);a.push(h);var d=this.viewManager_.pruneUpdateNode(h,c,this.data_.mergedData,null);s=s.concat(this.data_.set(e,d))}if(r)return D.log("update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");var f=this;this.connection_.merge(e.toString(),t,function(t,i){"ok"!==t&&D.warn("update at "+e+" failed: "+t),f.data_.setCompleted(s),f.data_.mergeServerAndPendingData(e);var r=f.rerunTransactionsAndUpdateVisibleData_(e);f.viewManager_.raiseEventsForChange(r,[]),f.callOnCompleteCallback(n,t,i)});var p=this.abortTransactions_(e);this.rerunTransactionsAndUpdateVisibleData_(p),f.viewManager_.raiseEventsForChange(p,a)}},{key:"setPriority",value:function(e,t,n){this.log_("setPriority",{path:e.toString(),priority:t});var i=this.generateServerValues(),r=S.resolveDeferredValue(t,i),a=this.data_.mergedData.getNode(e).updatePriority(r),o=this.viewManager_.pruneUpdateNode(e,a,this.data_.mergedData,null),s=this.data_.set(e,o),u=this;this.connection_.put(e.toString()+"/.priority",t,function(t,i){"permission_denied"===t&&D.warn("setPriority at "+e+" failed: "+t),u.data_.setCompleted(s),u.data_.mergeServerAndPendingData(e);var r=u.rerunTransactionsAndUpdateVisibleData_(e);u.viewManager_.raiseEventsForChange(r,[]),u.callOnCompleteCallback(n,t,i)});var l=this.rerunTransactionsAndUpdateVisibleData_(e);u.viewManager_.raiseEventsForChange(l,[])}},{key:"runOnDisconnectEvents_",value:function(){this.log_("onDisconnectEvents");var e=this,t=[],n=this.generateServerValues(),i=S.resolveDeferredValueTree(this.onDisconnect_,n);i.forEachTree(new w["default"](""),function(n,i){var r=e.viewManager_.pruneUpdateNode(n,i,e.data_.mergedData,null);t.push.apply(t,e.data_.set(n,r));var a=e.abortTransactions_(n);e.rerunTransactionsAndUpdateVisibleData_(a),e.viewManager_.raiseEventsForChange(a,[n])}),this.data_.setCompleted(t),this.onDisconnect_=new A["default"]}},{key:"onDisconnectCancel",value:function(e,t){var n=this;this.connection_.onDisconnectCancel(e.toString(),function(i,r){"ok"===i&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,i,r)})}},{key:"onDisconnectSet",value:function(e,t,n){var i=this,r=N.NodeFromJSON(t);this.connection_.onDisconnectPut(e.toString(),r.val(!0),function(t,a){"ok"===t&&i.onDisconnect_.remember(e,r),i.callOnCompleteCallback(n,t,a)})}},{key:"onDisconnectSetWithPriority",value:function(e,t,n,i){var r=this,a=N.NodeFromJSON(t,n);this.connection_.onDisconnectPut(e.toString(),a.val(!0),function(t,n){"ok"===t&&r.onDisconnect_.remember(e,a),r.callOnCompleteCallback(i,t,n)})}},{key:"onDisconnectUpdate",value:function(e,t,n){var i=!0;for(var r in t)i=!1;if(i)return D.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");var a=this;this.connection_.onDisconnectMerge(e.toString(),t,function(i,r){if("ok"===i)for(var o in t){var s=N.NodeFromJSON(t[o]);a.onDisconnect_.remember(e.child(o),s)}a.callOnCompleteCallback(n,i,r)})}},{key:"logOnDisconnectDeprecatedSignature",value:function(){this.stats_.incrementCounter("deprecated_on_disconnect"),this.statsReporter_.includeStat("deprecated_on_disconnect")}},{key:"addEventCallbackForQuery",value:function(e,t,n,i,r){".info"===e.path.getFront()?this.infoViewManager_.addEventCallbackForQuery(e,t,n,i,r):this.viewManager_.addEventCallbackForQuery(e,t,n,i,r)}},{key:"removeEventCallbackForQuery",value:function(e,t,n,i){if(".info"===e.path.getFront())this.infoViewManager_.removeEventCallbackForQuery(e,t,n,i);else{var r=this.viewManager_.removeEventCallbackForQuery(e,t,n,i);if(null!==r){var a=this.data_.forgetPath(e.path,r);a&&(D.assert(this.data_.visibleData.rootNode_===this.viewManager_.oldDataNode_,"We should have raised any outstanding events by now.  Else, we'll blow them away."),this.data_.visibleData.updateSnapshot(e.path,this.data_.mergedData.getNode(e.path)),this.viewManager_.oldDataNode_=this.data_.visibleData.rootNode_)}}}},{key:"interrupt",value:function(){this.connection_.interrupt()}},{key:"resume",value:function(){this.connection_.resume()}},{key:"stats",value:function t(e){if("undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new d["default"](this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=I.reduce(x.getKeys(t),function(e,t){return Math.max(t.length,e)},0);for(var i in t){for(var r=t[i],a=i.length;n+2>a;a++)i+=" ";console.log(i+r)}}}},{key:"statsIncrementCounter",value:function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)}},{key:"log_",value:function(){D.log("r:"+this.connection_.id+":",arguments)}},{key:"callOnCompleteCallback",value:function(e,t,n){e&&T.exceptionGuard(function(){if("ok"===t)e(null,n);else{var i=t||"ERROR",r=i,a=D.getFriendlyErrorReason(t)||n,o=void 0;a&&(r+=": "+a),o=new Error(r),o.code=i,e(o)}})}},{key:"transactions_init_",value:function(){this.transactionQueueTree_=new L["default"],this.transactionResultData_=new b["default"]}},{key:"startTransaction",value:function(e,t,n,i){this.log_("transaction on "+e);var r=function(){},a=new Webcom(this,e);a.on("value",r);var o=function(){a.off("value",r)},s={path:e,update:t,onComplete:n,status:null,order:D.LUIDGenerator(),applyLocally:i,retryCount:0,unwatcher:o,abortReason:null};this.pruneResultData_();var u=s.update(this.transactionResultData_.getNode(e).val());if(P.isDef(u)){j.validateWebcomData("transaction failed: Data returned ",u),s.status=F.RUN;var l=this.transactionQueueTree_.subTree(e),c=l.getValue()||[];c.push(s),l.setValue(c);var h;if("object"==typeof u&&null!==u&&R.contains(u,".priority"))h=u[".priority"];else{var d=this.data_.mergedData.getNode(e);h=d.getPriority()}var f=this.generateServerValues(),p=N.NodeFromJSON(u,h),v=S.resolveDeferredValueSnapshot(p,f);this.transactionResultData_.updateSnapshot(e,v),s.applyLocally&&(this.data_.visibleData.updateSnapshot(e,v),this.viewManager_.raiseEventsForChange(e,[e])),this.sendReadyTransactions_()}else if(s.unwatcher(),s.onComplete){var g=this.getSnapshot_(e);s.onComplete(null,!1,g)}}},{key:"sendReadyTransactions_",value:function(e){var t=e||this.transactionQueueTree_;if(e||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);D.assert(n.length>0);var i=I.every(n,function(e){return e.status===F.RUN});i&&this.sendTransactionQueue_(t.path(),n)}else if(t.hasChildren()){var r=this;t.forEachChild(function(e){r.sendReadyTransactions_(e)})}}},{key:"sendTransactionQueue_",value:function(e,t){for(var n=0;n<t.length;n++)D.assert(t[n].status===F.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),t[n].status=F.SENT,t[n].retryCount++;var i=this.data_.mergedData.getNode(e).hash();this.data_.mergedData.updateSnapshot(e,this.data_.visibleData.getNode(e));var r=this.transactionResultData_.getNode(e).val(!0),a=D.LUIDGenerator(),o=this.pathsWithLocallyAppliedChanges(t);for(n=0;n<o.length;n++)this.data_.pendingPuts.subTree(o[n]).setValue(a);var s=this;this.connection_.put(e.toString(),r,function(i){for(s.log_("transaction put response",{path:e.toString(),status:i}),n=0;n<o.length;n++){var r=s.data_.pendingPuts.subTree(o[n]),u=r.getValue();D.assert(null!==u,"sendTransactionQueue_: pendingPut should not be null."),u===a&&(r.setValue(null),s.data_.mergedData.updateSnapshot(o[n],s.data_.serverData.getNode(o[n])))}if("ok"===i){var l=[];for(n=0;n<t.length;n++){if(t[n].status=F.COMPLETED,t[n].onComplete){var c=s.getSnapshot_(t[n].path);l.push(T.bind(t[n].onComplete,null,null,!0,c))}t[n].unwatcher()}for(s.pruneCompletedTransactionsBelowNode_(s.transactionQueueTree_.subTree(e)),s.sendReadyTransactions_(),n=0;n<l.length;n++)T.exceptionGuard(l[n])}else{if("datastale"===i)for(n=0;n<t.length;n++)t[n].status=t[n].status===F.SENT_NEEDS_ABORT?F.NEEDS_ABORT:F.RUN;else for(D.warn("transaction at "+e+" failed: "+i),n=0;n<t.length;n++)t[n].status=F.NEEDS_ABORT,t[n].abortReason=i;var h=s.rerunTransactionsAndUpdateVisibleData_(e);s.viewManager_.raiseEventsForChange(h,[e])}},i)}},{key:"pathsWithLocallyAppliedChanges",value:function(e){for(var t={},n=0;n<e.length;n++)e[n].applyLocally&&(t[e[n].path.toString()]=e[n].path);var i=[];for(var r in t)i.push(t[r]);return i}},{key:"rerunTransactionsAndUpdateVisibleData_",value:function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),i=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(i,n),n}},{key:"rerunTransactionQueue_",value:function(e,t){if(this.data_.visibleData.updateSnapshot(t,this.data_.mergedData.getNode(t)),this.transactionResultData_.updateSnapshot(t,this.data_.mergedData.getNode(t)),0!==e.length){for(var n=this.data_.visibleData.getNode(t),i=n,r=[],a=0;a<e.length;a++){var o,s=w["default"].RelativePath(t,e[a].path),u=!1;if(D.assert(null!==s,"rerunTransactionsUnderNode_: relativePath should not be null."),e[a].status===F.NEEDS_ABORT)u=!0,o=e[a].abortReason;else if(e[a].status===F.RUN)if(e[a].retryCount>=25)u=!0,o="maxretry";else{var l=n.getChild(s),c=e[a].update(l.val());if(P.isDef(c)){j.validateWebcomData("transaction failed: Data returned ",c);var h=N.NodeFromJSON(c),d="object"==typeof c&&null!=c&&R.contains(c,".priority");d||(h=h.updatePriority(l.getPriority())),n=n.updateChild(s,h),e[a].applyLocally&&(i=i.updateChild(s,h))}else u=!0,o="nodata"}if(u&&(e[a].status=F.COMPLETED,function(e){setTimeout(e,Math.floor(0))}(e[a].unwatcher),e[a].onComplete)){var f=new Webcom(this,e[a].path),p=new B["default"](n.getChild(s),f);r.push("nodata"===o?T.bind(e[a].onComplete,null,null,!1,p):T.bind(e[a].onComplete,null,new Error(o),!1,p))}}for(this.transactionResultData_.updateSnapshot(t,n),this.data_.visibleData.updateSnapshot(t,i),this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)T.exceptionGuard(r[a]);this.sendReadyTransactions_()}}},{key:"getAncestorTransactionNode_",value:function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n}},{key:"buildTransactionQueue_",value:function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t}},{key:"aggregateTransactionQueuesForNode_",value:function(e,t){var n=e.getValue();if(null!==n)for(var i=0;i<n.length;i++)t.push(n[i]);var r=this;e.forEachChild(function(e){r.aggregateTransactionQueuesForNode_(e,t)})}},{key:"pruneCompletedTransactionsBelowNode_",value:function(e){var t=e.getValue();if(t){for(var n=0,i=0;i<t.length;i++)t[i].status!==F.COMPLETED&&(t[n]=t[i],n++);t.length=n,e.setValue(t.length>0?t:null)}var r=this;e.forEachChild(function(e){r.pruneCompletedTransactionsBelowNode_(e)})}},{key:"abortTransactions_",value:function(e){var t=this.getAncestorTransactionNode_(e).path(),n=this.transactionQueueTree_.subTree(e),i=this;return n.forEachAncestor(function(e){i.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(n),n.forEachDescendant(function(e){i.abortTransactionsOnNode_(e)}),t}},{key:"abortTransactionsOnNode_",value:function(e){var t=e.getValue();if(null!==t){for(var n=[],i=-1,r=0;r<t.length;r++)t[r].status!==F.SENT_NEEDS_ABORT&&(t[r].status===F.SENT?(D.assert(i===r-1,"All SENT items should be at beginning of queue."),i=r,t[r].status=F.SENT_NEEDS_ABORT,t[r].abortReason="set"):(D.assert(t[r].status===F.RUN),t[r].unwatcher(),t[r].onComplete&&n.push(T.bind(t[r].onComplete,null,new Error("set"),!1,null))));for(-1===i?e.setValue(null):t.length=i+1,r=0;r<n.length;r++)T.exceptionGuard(n[r])}}},{key:"getSnapshot_",value:function(e){var t=new Webcom(this,e);return new B["default"](this.transactionResultData_.getNode(e),t)}},{key:"pruneResultData_",value:function(){this.transactionResultData_.rootNode_=this.pruneResultDataHelper_(this.transactionResultData_.rootNode_,this.data_.mergedData.rootNode_,this.transactionQueueTree_)}},{key:"pruneResultDataHelper_",value:function(e,t,n){var i=this;if(n.isEmpty())return t;if(null!=n.getValue())return e;var r=t;return n.forEachChild(function(n){var a=n.name(),o=new w["default"](a),s=i.pruneResultDataHelper_(e.getChild(o),t.getChild(o),n);r=r.updateImmediateChild(a,s)}),r}}]),e}();n["default"]=U,t.exports=n["default"]},{10:10,11:11,15:15,19:19,23:23,24:24,25:25,26:26,27:27,32:32,33:33,34:34,38:38,44:44,45:45,47:47,49:49,6:6,7:7,75:75,76:76,77:77,78:78}],21:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(35),o=function(){function e(t,n,i,o){r(this,e),this.host=t.toLowerCase(),this.domain=t.indexOf("/")>0?this.host.replace(/\/.*$/,""):this.host.substr(this.host.indexOf(".")+1),this.secure=n,this.namespace=i,this.webSocketOnly=o,this.internalHost=a.PersistentStorage.get("host:"+t)||this.host}return i(e,[{key:"needsQueryParam",value:function(){return this.host!==this.internalHost}},{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"updateHost",value:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&a.PersistentStorage.set("host:"+this.host,this.internalHost))}},{key:"toString",value:function(){return(this.secure?"https://":"http://")+this.host}}]),e}();n["default"]=o,t.exports=n["default"]},{35:35,6:6,7:7}],22:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o,s=e(20),u=a(s),l=e(78),c=function(){function e(){r(this,e),this.repos_={}}return i(e,[{key:"interrupt",value:function(){for(var e in this.repos_)this.repos_[e].interrupt()}},{key:"resume",value:function(){for(var e in this.repos_)this.repos_[e].resume()}},{key:"getRepo",value:function(e){var t=e.toString(),n=l.get(this.repos_,t);return n||(n=new u["default"](e),this.repos_[t]=n),n}}],[{key:"getInstance",value:function(){return o||(o=new e),o}}]),e}();n["default"]=c,t.exports=n["default"]},{10:10,20:20,6:6,7:7,78:78}],23:[function(e,t,n){"use strict";var i=e(8)["default"],r=e(7)["default"],a=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e(27),s=function(){function e(){a(this,e),this.rootNode_=o.EMPTY_NODE}return r(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}},{key:"toString",value:function(){return i(Object.getPrototypeOf(e.prototype),"toString",this).call(this)}}]),e}();n["default"]=s,t.exports=n["default"]},{27:27,6:6,7:7,8:8}],24:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e(44),s=a(o),u=e(39),l=a(u),c=function(){function e(){r(this,e),this.value_=null,this.children_=null}return i(e,[{key:"find",value:function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();if(e=e.popFront(),this.children_.contains(t)){var n=this.children_.get(t);return n.find(e)}return null}},{key:"remember",value:function(t,n){if(t.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,n);else{null==this.children_&&(this.children_=new l["default"]);var i=t.getFront();this.children_.contains(i)||this.children_.add(i,new e);var r=this.children_.get(i);t=t.popFront(),r.remember(t,n)}}},{key:"forget",value:function(e){if(e.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(function(e,t){n.remember(new s["default"](e),t)}),this.forget(e)}if(null!==this.children_){var i=e.getFront();if(e=e.popFront(),this.children_.contains(i)){var r=this.children_.get(i).forget(e);r&&this.children_.remove(i)}return this.children_.isEmpty()?(this.children_=null,!0):!1}return!0}},{key:"forEachTree",value:function(e,t){null!==this.value_?t(e,this.value_):this.forEachChild(function(n,i){var r=new s["default"](e.toString()+"/"+n);i.forEachTree(r,t)})}},{key:"forEachChild",value:function(e){null!==this.children_&&this.children_.each(function(t,n){e(t,n)})}}]),e}();n["default"]=c,t.exports=n["default"]},{10:10,39:39,44:44,6:6,7:7}],25:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"],o=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),u=a(s),l=e(53),c=a(l),h=e(54),d=a(h),f=e(55),p=a(f),v=e(47),g=a(v),y=e(44),m=a(y),_=e(27),b=e(38),C=o(b),A=e(78),k=o(A),w=e(76),E=o(w),S=e(75),N=function(){function e(t,n){r(this,e),this.connection_=t,this.data_=n,this.oldDataNode_=n.rootNode_,this.viewsTree_=new g["default"]}return i(e,[{key:"addEventCallbackForQuery",value:function(e,t,n,i,r){var a=e.path,o=this.viewsTree_.subTree(a),s=o.getValue();null===s?(s=new c["default"],o.setValue(s)):C.assert(!s.isEmpty(),"We shouldn't be storing empty QueryMaps");var u,l=e.queryIdentifier();if(s.contains(l))u=s.get(l),u.addEventCallback(t,n,i,r),u.raiseQueuedEvents();else{var h=this.data_.rootNode_.getChild(a);u=this.createView_(e,h),this.ensureListening_(o,s,l,u),u.addEventCallback(t,n,i,r);var d=this.viewsTree_.subTree(a).forEachAncestor(function(e){return e.getValue()&&e.getValue().defaultView()&&e.getValue().defaultView().isComplete()?!0:void 0},!0);d=d||null===this.connection_&&!this.data_.getNode(a).isEmpty(),d&&u.markComplete(),u.raiseQueuedEvents()}}},{key:"removeCallbackForQuery_",value:function(e,t,n,i,r){var a=e.get(t),o=a&&a.removeEventCallback(n,i,r)&&!a.hasCallbacks();return o&&e.remove(t),o}},{key:"doRemoveQueries_",value:function(e,t,n,i,r){var a=t?t.queryIdentifier():null,o=[];if(a&&"default"!==a)this.removeCallbackForQuery_(e,a,n,i,r)&&o.push(a);else{var s=this;S.forEach(e.keys(),function(t){s.removeCallbackForQuery_(e,t,n,i,r)&&o.push(t)})}return o}},{key:"removeEventCallbackForQuery",value:function(e,t,n,i){var r=e.path,a=this.viewsTree_.subTree(r),o=a.getValue();return null===o?null:this.removeQueries_(o,e,t,n,i)}},{key:"removeQueries_",value:function(e,t,n,i,r){var a=e.path(),o=this.viewsTree_.subTree(a),s=this.doRemoveQueries_(e,t,n,i,r);e.isEmpty()&&o.setValue(null);var u=this.hasActiveAncestor(o);if(s.length>0&&!u){for(var l=o,c=o.parent(),h=!1;!h&&c;){var d=c.getValue();if(d){C.assert(!d.hasActiveDefaultQuery());var f=l.name(),p=!1;d.each(function(e,t){p=t.hasChild(f)||p}),p&&(h=!0)}l=c,c=c.parent()}var v=null;if(!e.hasActiveDefaultQuery()){var g=e.removeStopListener();v=this.collectListeners_(o,!0),g&&g()}return h?null:v}return null}},{key:"markQueriesComplete",value:function(e,t){var n=this.viewsTree_.subTree(e);n.forEachDescendant(function(e){var t=e.getValue();t&&t.each(function(e,t){t.markComplete()})},t,!0)}},{key:"raiseEventsForChange",value:function(e,t){var n=this,i=this.oldDataNode_,r=this.data_.rootNode_;this.oldDataNode_=r;for(var a={},o=0;o<t.length;o++)a[t[o].toString()]=!0;var s=function(e){do{if(a[e.toString()])return!0;e=e.parent()}while(null!==e);return!1},u=function(t,i,r){if(e.contains(t)){var a=s(t);a&&n.markQueriesComplete(t,!1),n.processChanges(t,i,r),a&&n.markQueriesComplete(t,!0)}else n.processChanges(t,i,r)};p["default"].Diff(i,r,e,this.viewsTree_,u),s(e)&&this.markQueriesComplete(e,!0),this.raiseQueuedEvents_(e)}},{key:"raiseQueuedEvents_",value:function(e){var t=this.viewsTree_.subTree(e);t.forEachDescendant(function(e){var t=e.getValue();t&&t.each(function(e,t){t.raiseQueuedEvents()})},!0,!0),t.forEachAncestor(function(e){var t=e.getValue();t&&t.each(function(e,t){t.raiseQueuedEvents()})},!1)}},{key:"processChanges",value:function(e,t,n){var i=this.viewsTree_.subTree(e).getValue();null!==i&&i.each(function(e,i){i.processChanges(t,n)})}},{key:"hasActiveAncestor",value:function(e){return e.forEachAncestor(function(e){return e.getValue()&&e.getValue().hasActiveDefaultQuery()})}},{key:"ensureListening_",value:function(e,t,n,i){if(t.hasActiveDefaultQuery()||this.hasActiveAncestor(e))t.setView(n,i);else{var r,a;t.isEmpty()||(r=t.toString(),a=t.queries()),t.setView(n,i),t.setActive(this.startListening(t)),r&&a&&this.connection_.unlisten(t.path(),r,a)}t.hasActiveDefaultQuery()&&e.forEachDescendant(function(e){var t=e.getValue();t&&t.deactivate()})}},{key:"collectListeners_",value:function(e,t){var n=[],i=this,r=function a(e){var r=e.getValue();if(r&&r.hasDefaultQuery())n.push(r.path()),t&&!r.isActive()&&r.setActive(i.startListening(r));else{if(t&&r){r.isActive()||r.setActive(i.startListening(r));var o={};r.each(function(e,t){t.snapshotNode_.forEachChild(function(e){if(!k.contains(o,e)){o[e]=!0;var t=r.path().child(e);n.push(t)}})})}e.forEachChild(a)}};return r(e),n}},{key:"startListening",value:function(e){if(this.connection_){var t,n=this,i=this.connection_,r=e.path(),a=e.toString(),o=e.queries(),s=function(){t=!0,i.unlisten(r,a,o)},u=e.keys(),l=e.hasDefaultQuery();return this.connection_.listen(e,function(i){if("ok"!==i){var r=C.errorForServerCode(i);C.warn("on() or once() for "+e.path().toString()+" failed: "+r.toString()),n.raiseCancelEventsForQuery_(e,r)}else t||(l?n.markQueriesComplete(e.path(),!0):S.forEach(u,function(t){var n=e.get(t);n&&n.markComplete()}),n.raiseQueuedEvents_(e.path()))}),s}return E.nullFunction}},{key:"raiseCancelEventsForQuery_",value:function(e,t){e&&(e.each(function(e,n){n.raiseCancelEvents(t)}),this.removeQueries_(e))}},{key:"createView_",value:function(e,t){return"default"===e.queryIdentifier()?new u["default"](e,t):new d["default"](e,t)}},{key:"getChildRelevance",value:function(e,t,n,i){var r={},a=function(e){A.forEach(e,function(e,t){if(e===d["default"].IN_VIEW)r[t]=d["default"].IN_VIEW;else{var n=k.get(r,t)||e;r[t]=n===e?e:d["default"].IN_VIEW}})};return t.each(function(t,r){a(r.getChildRelevance(e,n,i))}),n.isLeafNode()||n.forEachChild(function(e){k.contains(r,e)||(r[e]=d["default"].OUT_OF_VIEW)}),r}},{key:"getAncestorUpdate",value:function(e,t,n){for(var i=this.viewsTree_.subTree(e),r=i.parent(),a=[];null!==r;){var o=r.getValue();if(null!==o){if(o.hasDefaultQuery())return[{path:e,node:t}];var s=this.getChildRelevance(e,o,t,n),u=k.get(s,i.name());if(u===d["default"].IN_VIEW||u===d["default"].ENTERING_VIEW)return[{path:e,node:t}];u===d["default"].LEAVING_VIEW&&a.push({path:e,node:_.EMPTY_NODE})}i=r,r=r.parent()}return a}},{key:"pruneNonDefaultQuery",value:function(e,t,n,i){var r=e.path(),a=this.getChildRelevance(r,e,n,i),o=_.EMPTY_NODE,s=[],u=this;return A.forEach(a,function(e,a){var l=new m["default"](a);e===d["default"].IN_VIEW||e===d["default"].ENTERING_VIEW?o=o.updateImmediateChild(a,n.getChild(l)):e===d["default"].LEAVING_VIEW?(s.push({path:r.child(a),node:_.EMPTY_NODE}),s=s.concat(u.pruneObjectToListeners_(n.getChild(l),t.subTree(l),i))):s=s.concat(u.pruneObjectToListeners_(n.getChild(l),t.subTree(l),i))}),[{path:r,node:o}].concat(s)}},{key:"pruneUpdateNode",value:function(e,t,n){var i=this.getAncestorUpdate(e,t,n);if(1===i.length&&(!i[0].node.isEmpty()||t.isEmpty()))return i;var r=this.viewsTree_.subTree(e),a=r.getValue();return null!==a?a.hasDefaultQuery()?i.push({path:e,node:t}):i=i.concat(this.pruneNonDefaultQuery(a,r,t,n)):i=i.concat(this.pruneObjectToListeners_(t,r,n)),i}},{key:"pruneObjectToListeners_",value:function(e,t,n){var i=t.getValue();if(null!==i)return i.hasDefaultQuery()?[{path:t.path(),node:e}]:this.pruneNonDefaultQuery(i,t,e,n);var r=[],a=this;return t.forEachChild(function(t){var i;i=e.isLeafNode()?_.EMPTY_NODE:e.getImmediateChild(t.name());var o=a.pruneObjectToListeners_(i,t,n);r=r.concat(o)}),r}}]),e}();n["default"]=N,t.exports=n["default"]},{10:10,11:11,27:27,38:38,44:44,47:47,51:51,53:53,54:54,55:55,6:6,7:7,75:75,76:76,78:78}],26:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"],o=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=e(23),u=a(s),l=e(47),c=a(l),h=e(38),d=o(h),f=e(27),p=e(75),v=function(){function e(){r(this,e),this.serverData=new u["default"],this.mergedData=new u["default"],this.visibleData=new u["default"],this.pendingPuts=new c["default"]}return i(e,[{key:"updateServerData",value:function(e,t){return this.serverData.updateSnapshot(e,t),this.mergeServerAndPendingData(e)}},{key:"mergeServerAndPendingData",value:function(t){for(var n=this.serverData.getNode(t),i=this.mergedData.getNode(t),r=this.pendingPuts.subTree(t),a=!1,o=r;null!==o;){if(null!==o.getValue()){a=!0;break}o=o.parent()}if(a)return!1;var s=e.mergeSnapshotNodes_(n,i,r);return s!==i?(this.mergedData.updateSnapshot(t,s),!0):!1}},{key:"set",value:function(e,t){var n=this,i=[];return p.forEach(t,function(e){var t=e.path,r=e.node,a=d.LUIDGenerator();n.pendingPuts.subTree(t).setValue(a),n.mergedData.updateSnapshot(t,r),i.push({path:t,setId:a})}),i}},{key:"setCompleted",value:function(e){var t=this;p.forEach(e,function(e){var n=e.setId,i=e.path,r=t.pendingPuts.subTree(i),a=r.getValue();d.assert(null!==a,"pendingPut should not be null."),a===n&&r.setValue(null)})}},{key:"forgetPath",value:function(e,t){for(var n=[],i=0;i<t.length;++i)n[i]=this.serverData.getNode(t[i]);for(this.serverData.updateSnapshot(e,f.EMPTY_NODE),i=0;i<t.length;++i)this.serverData.updateSnapshot(t[i],n[i]);return this.mergeServerAndPendingData(e)}}],[{key:"mergeSnapshotNodes_",value:function(t,n,i){return i.isEmpty()?t:null!==i.getValue()?n:(t=t||f.EMPTY_NODE,i.forEachChild(function(r){var a=r.name(),o=t.getImmediateChild(a),s=n.getImmediateChild(a),u=i.subTree(a),l=e.mergeSnapshotNodes_(o,s,u);t=t.updateImmediateChild(a,l)}),t)}}]),e}();n.WebcomData=v,n["default"]=v},{10:10,11:11,23:23,27:27,38:38,47:47,6:6,7:7,75:75}],27:[function(e,t,n){"use strict";function i(e,t){return m.priorityCompare(e.priority,t.priority)||y.nameCompare(e.name,t.name)}function r(e,t){return y.nameCompare(e.name,t.name)}function a(e,t){if(null===e)return w;var n=null;if("object"==typeof e&&".priority"in e?n=e[".priority"]:"undefined"!=typeof t&&(n=t),m.assert(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){var i=e;return new p["default"](i,n)}if(e instanceof Array){var r=w,s=e;return _.forEach(s,function(e,t){if(_.contains(s,t)&&"."!==t.substring(0,1)){var n=a(e);(n.isLeafNode()||!n.isEmpty())&&(r=r.updateImmediateChild(t,n))}}),r.updatePriority(n)}var u=[],l={},c=!1,h=e;m.each(h,function(e,t){if("string"!=typeof t||"."!==t.substring(0,1)){var n=a(h[t]);n.isEmpty()||(c=c||null!==n.getPriority(),u.push({name:t,priority:n.getPriority()}),l[t]=n)}});var f=o(u,l,!1);if(c){var v=o(u,l,!0);return new g["default"](f,v,n)}return new d["default"](f,n)}function o(e,t,n){var a=n?i:r;e.sort(a);var o=function c(i,r){var a,o,s=r-i;if(0===s)return null;if(1===s)return a=e[i].name,o=n?e[i]:a,new b.LLRBNode(o,t[a],b.LLRBNode.BLACK,null,null);var u=parseInt(s/2,10)+i,l=c(i,u),h=c(u+1,r);return a=e[u].name,o=n?e[u]:a,new b.LLRBNode(o,t[a],b.LLRBNode.BLACK,l,h)},s=function(i){for(var r=null,a=null,s=e.length,u=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=function(i,r){var a=s-i,l=s;s-=i;var c=o(a+1,l),h=e[a].name,d=n?e[a]:h;u(new b.LLRBNode(d,t[h],r,null,c))},c=0;c<i.count;++c){var h=i.nextBitIsOne(),d=Math.pow(2,i.count-(c+1));h?l(d,b.LLRBNode.BLACK):(l(d,b.LLRBNode.BLACK),l(d,b.LLRBNode.RED))}return a},u=new k(e.length),l=s(u);return a=n?i:y.nameCompare,null!==l?new C["default"](a,l):new C["default"](a)}var s=e(7)["default"],u=e(6)["default"],l=e(10)["default"],c=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.NAME_AND_PRIORITY_COMPARATOR=i,n.NAME_ONLY_COMPARATOR=r,n.NodeFromJSON=a,n.buildChildSet=o;var h=e(28),d=l(h),f=e(29),p=l(f),v=e(30),g=l(v),y=e(38),m=c(y),_=e(78),b=e(46),C=l(b),A=Math.log(2),k=function(){function e(t){u(this,e);var n=function(e){return parseInt(Math.log(e)/A,10)},i=function(e){return parseInt(Array(e+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var r=i(this.count);this.bits_=t+1&r}return s(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}();n.Base12Num=k;var w=new d["default"];
n.EMPTY_NODE=w,n["default"]={EMPTY_NODE:w,NAME_AND_PRIORITY_COMPARATOR:i,NAME_ONLY_COMPARATOR:r,NodeFromJSON:a,buildChildSet:o}},{10:10,11:11,28:28,29:29,30:30,38:38,46:46,6:6,7:7,78:78}],28:[function(e,t,n){"use strict";var i=e(8)["default"],r=e(7)["default"],a=e(6)["default"],o=e(4)["default"],s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u=e(38),l=e(46),c=s(l),h=e(29),d=s(h),f=function(){function e(t,n){a(this,e),this.children_=t||new c["default"](u.nameCompare),this.priority_="undefined"!=typeof n?n:null}return r(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priority_}},{key:"updatePriority",value:function(t){return new e(this.children_,t)}},{key:"updateValue",value:function(e){return new d["default"](e,this.priority_)}},{key:"updateImmediateChild",value:function(t,n){var i=this.children_.remove(t);return n&&n.isEmpty()&&(n=null),null!==n&&(i=i.insert(t,n)),n&&null!==n.getPriority()?new Webcom.INTERNAL.SortedChildrenNode(i,null,this.priority_):new e(i,this.priority_)}},{key:"updateChild",value:function(e,t){var n=e.getFront();if(null===n)return t;var i=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,i)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(e){if(this.isEmpty())return null;var t={},n=0,i=0,r=!0;if(this.forEachChild(function(a,o){t[a]=o.val(e),n++,r&&/^\d+$/.test(a)?i=Math.max(i,Number(a)):r=!1}),!e&&r&&2*n>i){var a=[];return o(t).forEach(function(e){return a[e]=t[e]}),a}return e&&null!==this.getPriority()&&(t[".priority"]=this.getPriority()),t}},{key:"hash",value:function(){var e="";return null!==this.getPriority()&&(e+="priority:"+u.priorityHashText(this.getPriority())+":"),this.forEachChild(function(t,n){var i=n.hash();""!==i&&(e+=":"+t+":"+i)}),""===e?"":u.sha1(e)}},{key:"getImmediateChild",value:function(t){var n=this.children_.get(t);return null===n?new e:n}},{key:"getChild",value:function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())}},{key:"getPredecessorChildName",value:function(e){return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(){return this.children_.minKey()}},{key:"getLastChildName",value:function(){return this.children_.maxKey()}},{key:"forEachChild",value:function(e){return this.children_.inorderTraversal(e)}},{key:"forEachChildReverse",value:function(e){return this.children_.reverseTraversal(e)}},{key:"getIterator",value:function(){return this.children_.getIterator()}},{key:"toString",value:function(){return i(Object.getPrototypeOf(e.prototype),"toString",this).call(this)}}]),e}();n.ChildrenNode=f,n["default"]=f},{10:10,29:29,38:38,4:4,46:46,6:6,7:7,8:8}],29:[function(e,t,n){"use strict";var i=e(8)["default"],r=e(7)["default"],a=e(6)["default"],o=e(11)["default"],s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u=e(38),l=o(u),c=e(28),h=s(c),d=function(){function e(t,n){a(this,e),this.value_=t,l.assert(null!==this.value_,"LeafNode shouldn't be created with null value."),this.priority_="undefined"!=typeof n?n:null}return r(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priority_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"updateValue",value:function(t){return new e(t,this.priority_)}},{key:"getImmediateChild",value:function(){return new h["default"]}},{key:"getChild",value:function(e){return null===e.getFront()?this:new h["default"]}},{key:"getPredecessorChildName",value:function(){return null}},{key:"updateImmediateChild",value:function(e,t){return(new h["default"]).updateImmediateChild(e,t).updatePriority(this.priority_)}},{key:"updateChild",value:function(e,t){var n=e.getFront();return null===n?t:this.updateImmediateChild(n,(new h["default"]).updateChild(e.popFront(),t))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"val",value:function(e){return e&&null!==this.getPriority()?{".value":this.getValue(),".priority":this.getPriority()}:this.getValue()}},{key:"hash",value:function(){var e="";null!==this.getPriority()&&(e+="priority:"+l.priorityHashText(this.getPriority())+":");var t=typeof this.value_;return e+=t+":",e+="number"===t?l.doubleToIEEE754String(this.value_):this.value_,l.sha1(e)}},{key:"getValue",value:function(){return this.value_}},{key:"toString",value:function(){return i(Object.getPrototypeOf(e.prototype),"toString",this).call(this)}}]),e}();n.LeafNode=d,n["default"]=d},{10:10,11:11,28:28,38:38,6:6,7:7,8:8}],30:[function(e,t,n){"use strict";var i=e(9)["default"],r=e(8)["default"],a=e(7)["default"],o=e(6)["default"],s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u=e(46),l=s(u),c=e(28),h=s(c),d=e(38),f=function(e,t){return d.priorityCompare(e.priority,t.priority)||d.nameCompare(e.name,t.name)},p=function(e){function t(e,n,i){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,i),null===n&&(n=new l["default"](f),e.inorderTraversal(function(e,t){n=n.insert({name:e,priority:t.getPriority()},t)})),this.sortedChildren_=n}return i(t,e),a(t,[{key:"updateImmediateChild",value:function(e,n){var i=this.getImmediateChild(e),r=this.children_,a=this.sortedChildren_;return null!==i&&(r=r.remove(e),a=a.remove({name:e,priority:i.getPriority()})),n&&n.isEmpty()&&(n=null),null!==n&&(r=r.insert(e,n),a=a.insert({name:e,priority:n.getPriority()},n)),new t(r,a,this.getPriority())}},{key:"getPredecessorChildName",value:function(e,t){var n=this.sortedChildren_.getPredecessorKey({name:e,priority:t.getPriority()});return n?n.name:null}},{key:"forEachChild",value:function(e){return this.sortedChildren_.inorderTraversal(function(t,n){return e(t.name,n)})}},{key:"forEachChildReverse",value:function(e){return this.sortedChildren_.reverseTraversal(function(t,n){return e(t.name,n)})}},{key:"getIterator",value:function(){return this.sortedChildren_.getIterator(function(e,t){return{key:e.name,value:t}})}},{key:"getFirstChildName",value:function(){return this.sortedChildren_.isEmpty()?null:this.sortedChildren_.minKey().name}},{key:"getLastChildName",value:function(){return this.sortedChildren_.isEmpty()?null:this.sortedChildren_.maxKey().name}}]),t}(h["default"]);n.SortedChildrenNode=p,n["default"]=p},{10:10,28:28,38:38,46:46,6:6,7:7,8:8,9:9}],31:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(77),o=e(78),s=function(){function e(){r(this,e),this.counters_={}}return i(e,[{key:"incrementCounter",value:function(e,t){a.isDef(t)||(t=1),o.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return o.clone(this.counters_)}}]),e}();n["default"]=s,t.exports=n["default"]},{6:6,7:7,77:77,78:78}],32:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(78),o=function(){function e(t){r(this,e),this.collection_=t,this.last_=null}return i(e,[{key:"get",value:function(){var e=this.collection_.get(),t=a.clone(e);if(this.last_)for(var n in this.last_)this.last_.hasOwnProperty(n)&&(t[n]=t[n]-this.last_[n]);return this.last_=e,t}}]),e}();n["default"]=o,t.exports=n["default"]},{6:6,7:7,78:78}],33:[function(e,t,n){"use strict";function i(e){var t=e.toString();return u[t]||(u[t]=new s["default"]),u[t]}function r(e,t){var n=e.toString();return l[n]||(l[n]=t()),l[n]}var a=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.getCollection=i,n.getOrCreateReporter=r;var o=e(31),s=a(o),u={},l={};n["default"]={getCollection:i,getOrCreateReporter:r}},{10:10,31:31}],34:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e(32),s=a(o),u=e(76),l=e(78),c=1e4,h=function(){function e(t,n){r(this,e),this.statsToReport_={},this.statsListener_=new s["default"](t),this.connection_=n;var i=c+(3e4-c)*Math.random();setTimeout(u.bind(this.reportStats_,this),Math.floor(i))}return i(e,[{key:"includeStat",value:function(e){this.statsToReport_[e]=!0}},{key:"reportStats_",value:function(){var e=this.statsListener_.get(),t={},n=!1;for(var i in e)e[i]>0&&l.contains(this.statsToReport_,i)&&(t[i]=e[i],n=!0);n&&this.connection_.reportStats(t),setTimeout(u.bind(this.reportStats_,this),Math.floor(2*Math.random()*3e5))}}]),e}();n["default"]=h,t.exports=n["default"]},{10:10,32:32,6:6,7:7,76:76,78:78}],35:[function(e,t,n){"use strict";function i(e){try{if("undefined"!=typeof window&&"undefined"!=typeof window[e]){var t=window[e];return t.setItem("webcom:sentinel","cache"),t.removeItem("webcom:sentinel"),new o["default"](t)}}catch(n){}return new u["default"]}var r=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(36),o=r(a),s=e(37),u=r(s),l=i("localStorage");n.PersistentStorage=l;var c=i("sessionStorage");n.SessionStorage=c},{10:10,36:36,37:37}],36:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(t){r(this,e),this.domStorage_=t,this.prefix_="webcom:"}return i(e,[{key:"set",value:function(e,t){null===t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),JSON.stringify(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null===t?null:JSON.parse(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"isInMemoryStorage",get:function(){return!1}}]),e}();n["default"]=a,t.exports=n["default"]},{6:6,7:7}],37:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(78),o=function(){function e(){r(this,e),this.cache_={}}return i(e,[{key:"set",value:function(e,t){null===t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return a.contains(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}},{key:"isInMemoryStorage",get:function(){return!0}}]),e}();n["default"]=o,t.exports=n["default"]},{6:6,7:7,78:78}],38:[function(e,t,n){(function(t){"use strict";function i(){return te++}function r(e,t){if(!e)throw new Error("Webcom INTERNAL ASSERT FAILED:"+t)}function a(e,t){e||f(t)}function o(e){return t.btoa(window.unescape(encodeURIComponent(e))).replace(/[\+\/=]/g,function(e){switch(e){case"=":return".";case"/":return"_";case"+":return"-"}})}function s(e){try{if("undefined"!=typeof atob)return atob(e)}catch(t){c("base64DecodeIfNativeSupport failed: ",t)}return null}function u(e){return $.fromBits(X.sha1.hash(e))}function l(){for(var e="",t=0;t<arguments.length;t++)e+=z.isArrayLike(arguments[t])?l.apply(null,arguments[t]):"object"==typeof arguments[t]?JSON.stringify(arguments[t]):arguments[t],e+=" ";return e}function c(){if(re===!0&&(re=!1,null===U&&G.SessionStorage.get("logging_enabled")===!0&&h(!0)),U){var e=l.apply(null,arguments);U(e)}}function h(e,t){r(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?("undefined"!=typeof console&&("function"==typeof console.log?n.logger=U=ee.bind(console.log,console):"object"==typeof console.log&&(n.logger=U=function(e){console.log(e)})),t&&G.SessionStorage.set("logging_enabled",!0)):e?n.logger=U=e:(n.logger=U=null,G.SessionStorage.remove("logging_enabled"))}function d(e){return function(){c(e,arguments)}}function f(){if("undefined"!=typeof console){var e="WEBCOM INTERNAL ERROR: "+l.apply(null,arguments);"undefined"!=typeof console.error?console.error(e):console.log(e)}}function p(){var e=l.apply(null,arguments);throw new Error("WEBCOM FATAL ERROR: "+e)}function v(){if("undefined"!=typeof console){var e="WEBCOM WARNING: "+l.apply(null,arguments);"undefined"!=typeof console.warn?console.warn(e):console.log(e)}}function g(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&v("Insecure Webcom access from a secure page. Please use https in calls to new Webcom().")}function y(e){var t="",n="",i=!0,r="",a="",o=void 0,s=void 0,u=void 0,l=void 0;return z.isString(e)&&(o=e.indexOf("//"),o>=0&&(a=e.substring(0,o-1),e=e.substring(o+2)),s=e.indexOf("/"),-1===s&&(s=e.length),t=e.substring(0,s),e=e.substring(s+1),u=t.split("."),l=e.split("/"),l.length>1&&"base"===l[0]?(i="https"===a||"wss"===a,n=l[1],r=m("/"+l.slice(2).join("/")),G.PersistentStorage.set("host:"+ie+"/"+/base\/[^\/]*/.exec(e),t),Z.setApiHost((i?"https":"http")+("://"+t)),t=ie+"/base/"+n,G.PersistentStorage.set("host:"+t,G.PersistentStorage.get("host:"+t)+(i?"/_wss":"/_ws"))):p("Cannot parse Webcom url. Please check your url.")),i||g(),{repoInfo:new q["default"](t,i,n,!0),path:new H["default"](r)}}function m(e){for(var t="",n=e.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=J.urlDecode(r)}catch(a){}t+="/"+r}return t}function _(e){return z.isNumber(e)&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)}function b(e){if("complete"===document.readyState)e();else{var t=!1,n=function i(){return document.body?void(t||(t=!0,e())):void setTimeout(i,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}function C(e,t){return e!==t?null===e?-1:null===t?1:typeof e!=typeof t?"number"==typeof e?-1:1:e>t?1:-1:0}function A(e,t){if(e===t)return 0;var n=x(e),i=x(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:t>e?-1:1}function k(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+JSON.stringify(t))}function w(e){if("object"!=typeof e||null===e)return JSON.stringify(e);var t=L(e);t.sort();for(var n="{",i=0;i<t.length;i++)0!==i&&(n+=","),n+=JSON.stringify(t[i]),n+=":",n+=w(e[t[i]]);return n+="}"}function E(e,t){if(e.length<=t)return[e];for(var n=[],i=0;i<e.length;i+=t)n.push(e.substr(i,t));return n}function S(e,t){if(z.isArray(e))for(var n=0;n<e.length;++n)t(n,e[n]);else Y.forEach(e,t)}function N(e){r(!_(e),"Invalid JSON number");var t,n,i,a,o,s,u,l=11,c=52,h=(1<<l-1)-1;for(0===e?(n=0,i=0,t=1/e===-1/0?1:0):(t=0>e,e=Math.abs(e),e>=Math.pow(2,1-h)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),h),n=a+h,i=Math.round(e*Math.pow(2,c-a)-Math.pow(2,c))):(n=0,i=Math.round(e/Math.pow(2,1-h-c)))),s=[],o=c;o;o-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(o=l;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse(),u=s.join("");var d="";for(o=0;64>o;o+=8){var f=parseInt(u.substr(o,8),2).toString(16);1===f.length&&(f="0"+f),d+=f}return d.toLowerCase()}function D(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))}function P(){return"object"==typeof Windows&&"object"==typeof Windows.UI}function T(e){var t=null;return"too_big"===e?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?t="Client doesn't have permission to access the desired data.":"unavailable"===e&&(t="The service is unavailable"),t}function R(e){var t=T(e)||"Unknown Error",n=new Error(e+": "+t);return n.code=e.toUpperCase(),n}function x(e){if(ae.test(e)){var t=Number(e);if(t>=-2147483648&&2147483647>=t)return t}return null}function O(e){return"number"==typeof e?"number:"+N(e):"string:"+e}function I(){var e=void 0===arguments[0]?"ns":arguments[0],n="undefined"!=typeof window?window:t;return e.split(".").forEach(function(e){n=n[e]=n[e]||{}}),n}function M(e){ne=e}function B(){return ne}function W(){return"undefined"==typeof window}var L=e(4)["default"],j=e(10)["default"],F=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.LUIDGenerator=i,n.assert=r,n.assertWeak=a,n.base64Encode=o,n.base64DecodeIfNativeSupport=s,n.sha1=u,n.log=c,n.enableLogging=h,n.logWrapper=d,n.error=f,n.fatal=p,n.warn=v,n.warnIfPageIsSecure=g,n.parseURL=y,n.decodePath=m,n.isInvalidJSONNumber=_,n.executeWhenDOMReady=b,n.priorityCompare=C,n.nameCompare=A,n.requireKey=k,n.objectToUniqueKey=w,n.splitStringBySize=E,n.each=S,n.doubleToIEEE754String=N,n.isChromeExtensionContentScript=D,n.isWindowsStoreApp=P,n.getFriendlyErrorReason=T,n.errorForServerCode=R,n.tryParseInt=x,n.priorityHashText=O,n.getGlobalNamespace=I,n.setNodeProxy=M,n.getNodeProxy=B,n.isNodeEnv=W;var U,V=e(21),q=j(V),Q=e(44),H=j(Q),G=e(35),K=e(77),z=F(K),Y=e(78),J=e(79),$=e(72),X=e(74),Z=e(61),ee=(e(75),e(76)),te=1,ne=void 0,ie="io.datasync.orange.com",re=!0;n.logger=U,n.logger=U=null;var ae=new RegExp("^-?\\d{1,10}$");n.INTEGER_REGEXP_=ae,n["default"]={assert:r,assertWeak:a,base64DecodeIfNativeSupport:s,base64Encode:o,decodePath:m,doubleToIEEE754String:N,each:S,error:f,getFriendlyErrorReason:T,errorForServerCode:R,executeWhenDOMReady:b,fatal:p,isChromeExtensionContentScript:D,isInvalidJSONNumber:_,isWindowsStoreApp:P,log:c,logger:U,logWrapper:d,LUIDGenerator:i,nameCompare:A,objectToUniqueKey:w,parseURL:y,priorityCompare:C,priorityHashText:O,requireKey:k,sha1:u,splitStringBySize:E,tryParseInt:x,warn:v,warnIfPageIsSecure:g,getGlobalNamespace:I,setNodeProxy:M,getNodeProxy:B}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,11:11,21:21,35:35,4:4,44:44,61:61,72:72,74:74,75:75,76:76,77:77,78:78,79:79}],39:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e(78),s=a(o),u=function(){function e(){r(this,e),this.set={}}return i(e,[{key:"add",value:function(e,t){this.set[e]=null!==t?t:!0}},{key:"contains",value:function(e){return s.contains(this.set,e)}},{key:"get",value:function(e){return this.contains(e)?this.set[e]:void 0}},{key:"remove",value:function(e){delete this.set[e]}},{key:"clear",value:function(){this.set={}}},{key:"isEmpty",value:function(){return s.isEmpty(this.set)}},{key:"count",value:function(){return s.getCount(this.set)}},{key:"each",value:function(e){s.forEach(this.set,function(t,n){e(n,t)})}},{key:"keys",value:function t(){var t=[];return s.forEach(this.set,function(e,n){t.push(n)}),t}}]),e}();n["default"]=u,t.exports=n["default"]},{11:11,6:6,7:7,78:78}],40:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(38),o=e(77),s=e(76),u=e(75),l=function(){function e(t){r(this,e),a.assert(o.isArray(t)&&t.length>0,"Requires a non-empty array"),this.allowedEvents_=t,this.listeners_={}}return i(e,[{key:"trigger",value:function(e){for(var t=this.listeners_[e]||[],n=0;n<t.length;n++)t[n].callback.apply(t[n].context,Array.prototype.slice.call(arguments,1))}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var i=this.getInitialEvent(e);i&&t.apply(n,i)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var i=this.listeners_[e]||[],r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}},{key:"validateEventType_",value:function(e){a.assert(u.find(this.allowedEvents_,function(t){return t===e}),"Unknown event: "+e)}},{key:"getInitialEvent",value:function(){s.abstractMethod()}}]),e}();n["default"]=l,t.exports=n["default"]},{38:38,6:6,7:7,75:75,76:76,77:77}],41:[function(e,t,n){"use strict";function i(e){var t=e===o;o=e;for(var n=new Array(8),i=7;i>=0;i--)n[i]=a.charAt(e%64),e=Math.floor(e/64);r.assert(0===e,"Cannot push at time == 0");var u=n.join("");if(t){for(i=11;i>=0&&63===s[i];i--)s[i]=0;s[i]++}else for(i=0;12>i;i++)s[i]=Math.floor(64*Math.random());for(i=0;12>i;i++)u+=a.charAt(s[i]);return r.assert(20===u.length,"NextPushId: Length should be 20."),u}Object.defineProperty(n,"__esModule",{value:!0}),n.NextPushId=i;var r=e(38),a="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",o=0,s=[];n["default"]={NextPushId:i}},{38:38}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){},t.exports=n["default"]},{}],43:[function(e,t,n){"use strict";var i=e(9)["default"],r=e(8)["default"],a=e(7)["default"],o=e(6)["default"],s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u,l=e(40),c=s(l),h=e(38),d=function(e){function t(){if(o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,["online"]),this.online_=!0,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var e=this;window.addEventListener("online",function(){e.online_||e.trigger("online",!0),e.online_=!0},!1),window.addEventListener("offline",function(){e.online_&&e.trigger("online",!1),e.online_=!1},!1)}}return i(t,e),a(t,[{key:"getInitialEvent",value:function(e){return h.assert("online"===e,"Unknown event type: "+e),[this.online_]}}],[{key:"getInstance",value:function(){return u||(u=new t),u}}]),t}(c["default"]);n["default"]=d,t.exports=n["default"]},{10:10,38:38,40:40,6:6,7:7,8:8,9:9}],44:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(t,n){if(r(this,e),1===arguments.length){this.pieces_=t.split("/");for(var i=0,a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return i(e,[{key:"getFront",value:function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]}},{key:"popFront",value:function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)}},{key:"getBack",value:function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null}},{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}},{key:"parent",value:function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)}},{key:"child",value:function(t){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(t instanceof e)for(i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{var r=t.split("/");for(i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new e(n,0)}},{key:"isEmpty",value:function(){return this.pieceNum_>=this.pieces_.length}},{key:"length",value:function(){return this.pieces_.length-this.pieceNum_}},{key:"contains",value:function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.length()>e.length())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}}],[{key:"RelativePath",value:function(t,n){var i=t.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return e.RelativePath(t.popFront(),n.popFront());throw"INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")"}}]),e}();n["default"]=a,t.exports=n["default"]},{6:6,7:7}],45:[function(e,t,n){"use strict";function i(e){return e=e||{},e.timestamp=e.timestamp||Date.now(),e}function r(e,t){return e&&"object"==typeof e?(p.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}function a(e,t){var n=new f["default"];return e.forEachTree(new h["default"](""),function(e,i){n.remember(e,o(i,t))}),n}function o(e,t){var n,i=r(e.getPriority(),t);if(e.isLeafNode()){var a=r(e.getValue(),t);return a!==e.getValue()||i!==e.getPriority()?new l["default"](a,i):e}return n=e,i!==e.getPriority()&&(n=n.updatePriority(i)),e.forEachChild(function(e,i){var r=o(i,t);r!==i&&(n=n.updateImmediateChild(e,r))}),n}var s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.generateWithValues=i,n.resolveDeferredValue=r,n.resolveDeferredValueTree=a,n.resolveDeferredValueSnapshot=o;var u=e(29),l=s(u),c=e(44),h=s(c),d=e(24),f=s(d),p=e(38);n["default"]={generateWithValues:i,resolveDeferredValue:r,resolveDeferredValueSnapshot:o,resolveDeferredValueTree:a}},{10:10,24:24,29:29,38:38,44:44}],46:[function(e,t,n){"use strict";function i(e,t){return t>e?-1:e>t?1:0}var r=e(7)["default"],a=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){a(this,e)}return r(e,[{key:"copy",value:function(){return this}},{key:"insert",value:function(e,t){return new h(e,t,null)}},{key:"remove",value:function(){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(){return!1}},{key:"reverseTraversal",value:function(){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}();n.LLRBEmptyNode=o;var s=new o,u=!0,l=function(){function e(t,n){a(this,e),this.comparator_=t?t:i,this.root_=n?n:s}return r(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,h.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,h.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;0>t?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,i=null;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}0>t?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new c(this.root_,e)}}]),e}();n["default"]=l;var c=function(){function e(t,n){for(a(this,e),this.resultGenerator_=n,this.nodeStack_=[];!t.isEmpty();)this.nodeStack_.push(t),t=t.left}return r(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();for(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}}]),e}();n.SortedMapIterator=c;var h=function(){function e(t,n,i,r,o){a(this,e),this.key=t,this.value=n,this.color=null!=i?i:u,this.left=null!=r?r:s,this.right=null!=o?o:s}return r(e,[{key:"copy",value:function(t,n,i,r,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var i,r;return r=this,i=n(e,r.key),r=0>i?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}},{key:"removeMin_",value:function(){var e;return this.left.isEmpty()?s:(e=this,e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_())}},{key:"remove",value:function(e,t){var n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return s;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}},{key:"rotateLeft_",value:function(){var e;return e=this.copy(null,null,u,null,this.right.left),this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight_",value:function(){var e;return e=this.copy(null,null,u,this.left.right,null),this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip_",value:function(){var e,t;return e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null),this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e;return e=this.check_(),Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if(e=this.left.check_(),e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();n.LLRBNode=h,h.RED=u,h.BLACK=!1},{6:6,7:7}],47:[function(e,t,n){"use strict";var i=e(6)["default"],r=e(7)["default"],a=e(10)["default"],o=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=e(44),u=a(s),l=e(78),c=o(l),h=e(38),d=function p(){i(this,p),this.children={},this.childCount=0,this.value=null};n.TreeNode=d;var f=function(){function e(t,n,r){i(this,e),this.name_=t?t:"",this.parent_=n?n:null,this.node_=r?r:new d}return r(e,[{key:"subTree",value:function(t){for(var n,i=t instanceof u["default"]?t:new u["default"](t),r=this;null!==(n=i.getFront());){var a=c.get(r.node_.children,n)||new d;r=new e(n,r,a),i=i.popFront()}return r}},{key:"getValue",value:function(){return this.node_.value}},{key:"setValue",value:function(e){h.assert("undefined"!=typeof e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()}},{key:"clear",value:function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()}},{key:"hasChildren",value:function(){return this.node_.childCount>0}},{key:"isEmpty",value:function(){return null===this.getValue()&&!this.hasChildren()}},{key:"forEachChild",value:function(t){for(var n in this.node_.children)this.node_.children.hasOwnProperty(n)&&t(new e(n,this,this.node_.children[n]))}},{key:"forEachDescendant",value:function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)}},{key:"forEachAncestor",value:function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1}},{key:"forEachImmediateDescendantWithValue",value:function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e);
})}},{key:"path",value:function(){return new u["default"](null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)}},{key:"name",value:function(){return this.name_}},{key:"parent",value:function(){return this.parent_}},{key:"updateParents_",value:function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)}},{key:"updateChild_",value:function(e,t){var n=t.isEmpty(),i=c.contains(this.node_.children,e);n&&i?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())}}]),e}();n["default"]=f},{10:10,11:11,38:38,44:44,6:6,7:7,78:78}],48:[function(e,t,n){"use strict";var i=e(9)["default"],r=e(8)["default"],a=e(7)["default"],o=e(6)["default"],s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u,l=e(40),c=s(l),h=e(38),d=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,["visible"]);var e,n;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(n="visibilitychange",e="hidden"):"undefined"!=typeof document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):"undefined"!=typeof document.msHidden?(n="msvisibilitychange",e="msHidden"):"undefined"!=typeof document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n){var i=this;document.addEventListener(n,function(){var t=!document[e];t!==i.visible_&&(i.visible_=t,i.trigger("visible",t))},!1)}}return i(t,e),a(t,[{key:"getInitialEvent",value:function(e){return h.assert("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return u||(u=new t),u}}]),t}(c["default"]);n["default"]=d,t.exports=n["default"]},{10:10,38:38,40:40,6:6,7:7,8:8,9:9}],49:[function(e,t,n){"use strict";function i(e){return E.isString(e)&&0!==e.length&&!N.test(e)}function r(e){return E.isString(e)&&0!==e.length&&!D.test(e)}function a(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),r(e)}function o(e,t,n,i){(!i||E.isDef(n))&&s(k.errorPrefix(e,t,i),n)}function s(e,t,n,r){if(n||(n=0),r=r||[],!E.isDef(t))throw new Error(e+"contains undefined"+u(r));if(S.isFunction(t))throw new Error(e+"contains a function"+u(r)+" with contents: "+t.toString());if(w.isInvalidJSONNumber(t))throw new Error(e+"contains "+t.toString()+u(r));if(n>T)throw new TypeError(e+"contains a cyclic object value ("+r.slice(0,100).join(".")+"...)");if(E.isString(t)&&t.length>P/3&&A.stringToByteArray(t).length>P)throw new Error(e+"contains a string greater than "+P+" utf8 bytes"+u(r)+" ('"+t.substring(0,50)+"...')");if(E.isObject(t))for(var a in t)if(C.contains(t,a)){var o=t[a];if(".priority"!==a&&".value"!==a&&".sv"!==a&&!i(a))throw new Error(e+"contains an invalid key ("+a+")"+u(r)+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(a),s(e,o,n+1,r),r.pop()}}function u(e){return 0===e.length?"":" in property '"+e.join(".")+"'"}function l(e,t,n,i){if(!i||E.isDef(n)){if(!E.isObject(n)||S.isArray(n))throw new Error(k.errorPrefix(e,t,i)+" must be an Object containing the children to replace.");o(e,t,n,i)}}function c(e,t,n,i){if((!i||E.isDef(n))&&!(null===n||E.isNumber(n)||E.isString(n)||E.isObject(n)&&C.contains(n,".sv")))throw new Error(k.errorPrefix(e,t,i)+"must be a valid webcom priority (a string, number, or null).")}function h(e,t,n,i){if(!i||E.isDef(n))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(k.errorPrefix(e,t,i)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function d(e,t,n,r){if((!r||E.isDef(n))&&!i(n))throw new Error(k.errorPrefix(e,t,r)+'was an invalid key: "'+n+'".  Webcom keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function f(e,t,n,i){if((!i||E.isDef(n))&&!r(n))throw new Error(k.errorPrefix(e,t,i)+'was an invalid path: "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function p(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),f(e,t,n,i)}function v(e,t){if(".info"===t.getFront())throw new Error(e+" failed: Can't modify data under /.info/")}function g(e,t,n){var r=n.path.toString();if(!E.isString(n.repoInfo.host)||0===n.repoInfo.host.length||!i(n.repoInfo.namespace)||0!==r.length&&!a(r))throw new Error(k.errorPrefix(e,t,!1)+'must be a valid webcom URL and the path can\'t contain ".", "#", "$", "[", or "]".')}function y(e,t,n,i){if((!i||E.isDef(n))&&!E.isUrl(n))throw new Error(k.errorPrefix(e,t,i)+"must be a valid credential (a string).")}function m(e,t,n,i){if((!i||E.isDef(n))&&!E.isString(n))throw new Error(k.errorPrefix(e,t,i)+"must be a valid credential (a string).")}function _(e,t,n,i){if((!i||E.isDef(n))&&!S.isBoolean(n))throw new Error(k.errorPrefix(e,t,i)+"must be a boolean.")}var b=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.isValidKey=i,n.isValidPathString=r,n.isValidRootPathString=a,n.validateWebcomDataArg=o,n.validateWebcomData=s,n.pathLocation_=u,n.validateWebcomObjectDataArg=l,n.validatePriority=c,n.validateEventType=h,n.validateKey=d,n.validatePathString=f,n.validateRootPathString=p,n.validateWritablePath=v,n.validateUrl=g,n.validateUri=y,n.validateCredential=m,n.validateBoolean=_;var C=e(78),A=e(80),k=e(81),w=e(38),E=e(77),S=b(E),N=/[\[\].#$\/\u0000-\u001F\u007F]/;n.INVALID_KEY_REGEX_=N;var D=/[\[\].#$\u0000-\u001F\u007F]/;n.INVALID_PATH_REGEX_=D;var P=10485760;n.MAX_LEAF_SIZE_=P;var T=1e3;n.MAX_DEPTH_SIZE_=T,n["default"]={isValidKey:i,isValidPathString:r,isValidRootPathString:a,pathLocation_:u,validateBoolean:_,validateCredential:m,validateEventType:h,validateWebcomData:s,validateWebcomDataArg:o,validateWebcomObjectDataArg:l,validateKey:d,validatePathString:f,validatePriority:c,validateRootPathString:p,validateUrl:g,validateWritablePath:v}},{11:11,38:38,77:77,78:78,80:80,81:81}],50:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(t,n,i,a){r(this,e),this.type=t,this.snapshotNode=n,this.childName=i,this.prevName=a}return i(e,null,[{key:"CHILD_ADDED",get:function(){return"child_added"}},{key:"CHILD_REMOVED",get:function(){return"child_removed"}},{key:"CHILD_CHANGED",get:function(){return"child_changed"}},{key:"CHILD_MOVED",get:function(){return"child_moved"}},{key:"VALUE",get:function(){return"value"}}]),e}();n["default"]=a,t.exports=n["default"]},{6:6,7:7}],51:[function(e,t,n){"use strict";var i=e(9)["default"],r=e(8)["default"],a=e(7)["default"],o=e(6)["default"],s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u=e(56),l=s(u),c=e(50),h=s(c),d=function(e){function t(e,n){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.snapshotNode_=n}return i(t,e),a(t,[{key:"processChanges_",value:function(e,t){return this.snapshotNode_=e,this.isComplete_&&null!==t&&t.push(new h["default"]("value",this.snapshotNode_)),t}},{key:"getChildRelevance",value:function(){return{}}}]),t}(l["default"]);n["default"]=d,t.exports=n["default"]},{10:10,50:50,56:56,6:6,7:7,8:8,9:9}],52:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(76),o=function(){function e(){r(this,e),this.events=[]}return i(e,[{key:"queueEvents",value:function(e){if(0!==e.length)for(var t=0;t<e.length;t++)this.events.push(e[t])}},{key:"raiseQueuedEvents",value:function(){for(var e=0;e<this.events.length;e++)if(this.events[e]){var t=this.events[e];this.events[e]=null,this.raiseEvent_(t)}this.events=[]}},{key:"raiseEvent_",value:function(e){var t=e.callback,n=e.snapshot,i=e.prevName;a.exceptionGuard(function(){t(n,i)})}}]),e}();n["default"]=o,t.exports=n["default"]},{6:6,7:7,76:76}],53:[function(e,t,n){"use strict";var i=e(9)["default"],r=e(8)["default"],a=e(7)["default"],o=e(6)["default"],s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u=e(39),l=s(u),c=e(75),h=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.stopListener_=null,this.path_=null}return i(t,e),a(t,[{key:"setActive",value:function(e){this.stopListener_=e}},{key:"isActive",value:function(){return null!==this.stopListener_}},{key:"setView",value:function(e,t){this.add(e,t),this.path_||(this.path_=t.getQuery().path)}},{key:"deactivate",value:function(){this.stopListener_&&this.stopListener_(),this.stopListener_=null}},{key:"removeStopListener",value:function(){var e=this.stopListener_;return this.stopListener_=null,e}},{key:"hasDefaultQuery",value:function(){return this.contains("default")}},{key:"hasActiveDefaultQuery",value:function(){return null!==this.stopListener_&&this.hasDefaultQuery()}},{key:"defaultView",value:function(){return this.hasDefaultQuery()?this.get("default"):null}},{key:"path",value:function(){return this.path_}},{key:"toString",value:function(){return c.map(this.keys(),function(e){return"default"===e?"{}":e}).join("$")}},{key:"queries",value:function n(){var n=[];return this.each(function(e,t){n.push(t.getQuery())}),n}}]),t}(l["default"]);n["default"]=h,t.exports=n["default"]},{10:10,39:39,6:6,7:7,75:75,8:8,9:9}],54:[function(e,t,n){"use strict";var i=e(9)["default"],r=e(8)["default"],a=e(7)["default"],o=e(6)["default"],s=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u=e(56),l=s(u),c=e(50),h=s(c),d=e(55),f=s(d),p=e(44),v=s(p),g=e(47),y=s(g),m=e(27),_=e(38),b=e(78),C=e(77),A=function(e){function t(e,n){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.snapshotNode_=m.EMPTY_NODE,this.processChanges_(n,this.generateChangesForSnapshot(n))}return i(t,e),a(t,[{key:"processChanges_",value:function(e,t){if(null===t)return t;var n=[],i=this.query_;C.isDef(i.startPriority)&&n.push(C.isDef(i.startName)&&null!==i.startName?function(e,t){var n=_.priorityCompare(t,i.startPriority);return n>0||0===n&&_.nameCompare(e,i.startName)>=0}:function(e,t){return _.priorityCompare(t,i.startPriority)>=0}),C.isDef(i.endPriority)&&n.push(C.isDef(i.endName)?function(e,t){var n=_.priorityCompare(t,i.endPriority);return 0>n||0===n&&_.nameCompare(e,i.endName)<=0}:function(e,t){return _.priorityCompare(t,i.endPriority)<=0});var r=null,a=null;if(C.isDef(this.query_.itemLimit))if(C.isDef(this.query_.startPriority)){if(r=this.getLimitName_(e,n,this.query_.itemLimit,!1)){var o=e.getImmediateChild(r).getPriority();n.push(function(e,t){var n=_.priorityCompare(t,o);return 0>n||0===n&&_.nameCompare(e,r)<=0})}}else if(a=this.getLimitName_(e,n,this.query_.itemLimit,!0)){var s=e.getImmediateChild(a).getPriority();n.push(function(e,t){var n=_.priorityCompare(t,s);return n>0||0===n&&_.nameCompare(e,a)>=0})}for(var u=[],l=[],c=[],d=[],f=0;f<t.length;f++){var p=t[f].type,v=t[f].childName,g=t[f].snapshotNode;switch(p){case h["default"].CHILD_ADDED:this.meetsConstraints_(n,v,g)&&(this.snapshotNode_=this.snapshotNode_.updateImmediateChild(v,g),l.push(t[f]));break;case h["default"].CHILD_REMOVED:this.snapshotNode_.getImmediateChild(v).isEmpty()||(this.snapshotNode_=this.snapshotNode_.updateImmediateChild(v,null),u.push(t[f]));break;case h["default"].CHILD_CHANGED:!this.snapshotNode_.getImmediateChild(v).isEmpty()&&this.meetsConstraints_(n,v,g)&&(this.snapshotNode_=this.snapshotNode_.updateImmediateChild(v,g),d.push(t[f]));break;case h["default"].CHILD_MOVED:var y=!this.snapshotNode_.getImmediateChild(v).isEmpty(),m=this.meetsConstraints_(n,v,g);y?m?(this.snapshotNode_=this.snapshotNode_.updateImmediateChild(v,g),c.push(t[f])):(u.push(new h["default"]("child_removed",this.snapshotNode_.getImmediateChild(v),v)),this.snapshotNode_=this.snapshotNode_.updateImmediateChild(v,null)):m&&(this.snapshotNode_=this.snapshotNode_.updateImmediateChild(v,g),l.push(t[f]))}}var b=r||a;if(b){var A=null!==a,k=A?this.snapshotNode_.getFirstChildName():this.snapshotNode_.getLastChildName(),w=A?e.forEachChildReverse:e.forEachChild,E=!1,S=!1,N=this;w.call(e,function(e,t){return S||null!==k||(S=!0),S&&E?!0:(E?(u.push(new h["default"]("child_removed",N.snapshotNode_.getImmediateChild(e),e)),N.snapshotNode_=N.snapshotNode_.updateImmediateChild(e,null)):S&&(l.push(new h["default"]("child_added",t,e)),N.snapshotNode_=N.snapshotNode_.updateImmediateChild(e,t)),k===e&&(S=!0),void(e===b&&(E=!0)))})}var D,P;for(f=0;f<l.length;f++)D=l[f],P=this.snapshotNode_.getPredecessorChildName(D.childName,D.snapshotNode),u.push(new h["default"]("child_added",D.snapshotNode,D.childName,P));for(f=0;f<c.length;f++)D=c[f],P=this.snapshotNode_.getPredecessorChildName(D.childName,D.snapshotNode),u.push(new h["default"]("child_moved",D.snapshotNode,D.childName,P));for(f=0;f<d.length;f++)D=d[f],P=this.snapshotNode_.getPredecessorChildName(D.childName,D.snapshotNode),u.push(new h["default"]("child_changed",D.snapshotNode,D.childName,P));return this.isComplete_&&u.length>0&&u.push(new h["default"]("value",this.snapshotNode_)),u}},{key:"getLimitName_",value:function(e,t,n,i){if(e.isLeafNode())return null;var r=i?e.forEachChildReverse:e.forEachChild,a=this,o=null;return r.call(e,function(e,i){return a.meetsConstraints_(t,e,i)&&(o=e,n--,0===n)?!0:void 0}),o}},{key:"meetsConstraints_",value:function(e,t,n){for(var i=0;i<e.length;i++)if(!e[i](t,n.getPriority()))return!1;return!0}},{key:"hasChild",value:function(e){return this.snapshotNode_.getImmediateChild(e)!==m.EMPTY_NODE}},{key:"getChildRelevance",value:function(e,n,i){var r={};this.snapshotNode_.isLeafNode()||this.snapshotNode_.forEachChild(function(e){r[e]=t.IN_VIEW});var a=this.snapshotNode_,o=i.getNode(new v["default"]("")),s=new y["default"],u=this.query_.path,l=s.subTree(u);l.setValue(!0);var c=m.EMPTY_NODE.updateChild(e,n),h=this,d=function(e,t,n){null!==n&&e.toString()===h.query_.path.toString()&&h.processChanges_(t,n)};return f["default"].Diff(o,c,e,s,d),this.snapshotNode_.isLeafNode()?b.forEach(r,function(e,n){r[n]=t.LEAVING_VIEW}):(this.snapshotNode_.forEachChild(function(e){b.contains(r,e)||(r[e]=t.ENTERING_VIEW)}),b.forEach(r,function(e,n){h.snapshotNode_.getImmediateChild(n).isEmpty()&&(r[n]=t.LEAVING_VIEW)})),this.snapshotNode_=a,r}}],[{key:"ENTERING_VIEW",get:function(){return 1}},{key:"LEAVING_VIEW",get:function(){return 2}},{key:"IN_VIEW",get:function(){return 3}},{key:"OUT_OF_VIEW",get:function(){return 4}}]),t}(l["default"]);n["default"]=A,t.exports=n["default"]},{10:10,27:27,38:38,44:44,47:47,50:50,55:55,56:56,6:6,7:7,77:77,78:78,8:8,9:9}],55:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e(50),s=a(o),u=e(78),l=e(27),c=e(77),h=function(){function e(t,n){r(this,e),this.diffMaskTree_=t,this.onDiffCallback_=n}return i(e,[{key:"propagateDiffUpward_",value:function(e,t,n,i,r){for(;null!==e.parent();){var a=t.getChild(e),o=n.getChild(e),u=e.parent();if(!this.diffMaskTree_||this.diffMaskTree_.subTree(u).getValue()){var l,c=n.getChild(u),h=[],d=e.getBack();a.isEmpty()?(l=c.getPredecessorChildName(d,o),h.push(new s["default"]("child_added",o,d,l))):o.isEmpty()?h.push(new s["default"]("child_removed",a,d)):(l=c.getPredecessorChildName(d,o),r&&h.push(new s["default"]("child_moved",o,d,l)),i&&h.push(new s["default"]("child_changed",o,d,l))),this.onDiffCallback_(u,c,h)}r&&(r=!1,i=!0),e=u}}},{key:"diffRecursive_",value:function(e,t,n){var i,r=[];return t===n?i=!1:t.isLeafNode()&&n.isLeafNode()?i=t.getValue()!==n.getValue():t.isLeafNode()?(this.diffChildrenRecursive_(e,l.EMPTY_NODE,n,r),i=!0):n.isLeafNode()?(this.diffChildrenRecursive_(e,t,l.EMPTY_NODE,r),i=!0):i=this.diffChildrenRecursive_(e,t,n,r),i?this.onDiffCallback_(e,n,r):t.getPriority()!==n.getPriority()&&this.onDiffCallback_(e,n,null),i}},{key:"diffChildrenRecursive_",value:function(e,t,n,i){var r,a,o,h,d,f,p,v=!1,g=!this.diffMaskTree_||!this.diffMaskTree_.subTree(e).isEmpty(),y=[],m=[],_=[],b=[],C={},A={};for(r=t.getIterator(),o=r.getNext(),a=n.getIterator(),h=a.getNext();null!==o||null!==h;){var k=this.compareChildren_(o,h);if(0>k){var w=u.get(C,o.key);c.isDef(w)?(_.push({from:o,to:y[w]}),y[w]=null):(A[o.key]=m.length,m.push(o)),v=!0,o=r.getNext()}else if(k>0){var E=u.get(A,h.key);c.isDef(E)?(_.push({from:m[E],to:h}),m[E]=null):(C[h.key]=y.length,y.push(h)),v=!0,h=a.getNext()}else d=e.child(h.key),p=this.diffRecursive_(d,o.value,h.value),p&&(b.push(h),v=!0),o.value.getPriority()!==h.value.getPriority()&&(_.push({from:o,to:h}),v=!0),o=r.getNext(),h=a.getNext();if(!g&&v)return!0}for(var S=0;S<m.length;S++){var N=m[S];N&&(d=e.child(N.key),this.diffRecursive_(d,N.value,l.EMPTY_NODE),i.push(new s["default"]("child_removed",N.value,N.key)))}for(S=0;S<y.length;S++){var D=y[S];D&&(d=e.child(D.key),f=n.getPredecessorChildName(D.key,D.value),this.diffRecursive_(d,l.EMPTY_NODE,D.value),i.push(new s["default"]("child_added",D.value,D.key,f)))}for(S=0;S<_.length;S++){var P=_[S].from,T=_[S].to;d=e.child(T.key),f=n.getPredecessorChildName(T.key,T.value),i.push(new s["default"]("child_moved",T.value,T.key,f)),p=this.diffRecursive_(d,P.value,T.value),p&&b.push(T)}for(S=0;S<b.length;S++){var R=b[S];f=n.getPredecessorChildName(R.key,R.value),i.push(new s["default"]("child_changed",R.value,R.key,f))}return v}},{key:"compareChildren_",value:function(e,t){return null===e?1:null===t?-1:e.key===t.key?0:l.NAME_AND_PRIORITY_COMPARATOR({name:e.key,priority:e.value.getPriority()},{name:t.key,priority:t.value.getPriority()})}}],[{key:"Diff",value:function(t,n,i,r,a){var o=t.getChild(i),s=n.getChild(i),u=new e(r,a),l=u.diffRecursive_(i,o,s),c=!o.isEmpty()&&!s.isEmpty()&&o.getPriority()!==s.getPriority();(l||c)&&u.propagateDiffUpward_(i,t,n,l,c)}}]),e}();n["default"]=h,t.exports=n["default"]},{10:10,27:27,50:50,6:6,7:7,77:77,78:78}],56:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e(50),s=a(o),u=e(52),l=a(u),c=e(15),h=a(c),d=e(38),f=e(76),p=function(){function e(t){r(this,e),this.query_=t,this.callbacks_=[],this.eventQueue_=new l["default"]}return i(e,[{key:"getQuery",value:function(){return this.query_}},{key:"addEventCallback",value:function(e,t,n,i){this.callbacks_.push({type:e,callback:t,cancel:n,context:i});var r=[],a=this.generateChangesForSnapshot(this.snapshotNode_);this.isComplete_&&a.push(new s["default"]("value",this.snapshotNode_));for(var o=0;o<a.length;o++)if(a[o].type===e){var u=new Webcom(this.query_.repo,this.query_.path);a[o].childName&&(u=u.child(a[o].childName)),r.push({callback:f.bindCallback(t,i),snapshot:new h["default"](a[o].snapshotNode,u),prevName:a[o].prevName})}this.eventQueue_.queueEvents(r)}},{key:"removeEventCallback",value:function(e,t,n){for(var i=!1,r=this.callbacks_.length-1;r>=0;r--){var a=this.callbacks_[r];if(!(e&&a.type!==e||t&&a.callback!==t||n&&a.context!==n)&&(this.callbacks_.splice(r,1),i=!0,e&&t))break}return i}},{key:"hasCallbacks",value:function(){return this.callbacks_.length>0}},{key:"processChanges",value:function(e,t){t=this.processChanges_(e,t),null!==t&&this.queueEventsForChanges_(t)}},{key:"raiseCancelEvents",value:function(e){for(var t=0;t<this.callbacks_.length;t++){var n=this.callbacks_[t];n.cancel&&f.bindCallback(n.cancel,n.context)(e)}}},{key:"queueEventsForChanges_",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=i.type,a=new Webcom(this.query_.repo,this.query_.path);e[n].childName&&(a=a.child(e[n].childName));var o=new h["default"](e[n].snapshotNode,a);"value"!==i.type||o.hasChildren()?"value"!==i.type&&(r+=" "+o.name()):r+="("+o.val()+")",d.log(this.query_.repo.connection_.id+": event:"+this.query_.path+":"+this.query_.queryIdentifier()+":"+r);for(var s=0;s<this.callbacks_.length;s++){var u=this.callbacks_[s];e[n].type===u.type&&t.push({callback:f.bindCallback(u.callback,u.context),snapshot:o,prevName:i.prevName})}}this.eventQueue_.queueEvents(t)}},{key:"raiseQueuedEvents",value:function(){this.eventQueue_.raiseQueuedEvents()}},{key:"generateChangesForSnapshot",value:function(e){var t=[];if(!e.isLeafNode()){var n=null;e.forEachChild(function(e,i){t.push(new s["default"](s["default"].CHILD_ADDED,i,e,n)),n=e})}return t}},{key:"isComplete",value:function(){return this.isComplete_}},{key:"markComplete",value:function(){this.isComplete_||(this.isComplete_=!0,this.queueEventsForChanges_([new s["default"]("value",this.snapshotNode_)]))}},{key:"processChanges_",value:function(){f.abstractMethod()}},{key:"getChildRelevance",value:function(){f.abstractMethod()}}]),e}();n["default"]=p,t.exports=n["default"]},{10:10,15:15,38:38,50:50,52:52,6:6,7:7,76:76}],57:[function(e,t,n){(function(i){"use strict";var r=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a=e(14),o=r(a),s=e(16),u=r(s),l=e(22),c=r(l);o["default"].ServerValue={TIMESTAMP:{".sv":"timestamp"}},o["default"].SDK_VERSION="1.0.3",o["default"].INTERNAL=u["default"],o["default"].Context=c["default"];var h=i||window;h.Webcom=o["default"],n["default"]=o["default"],t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,14:14,16:16,22:22}],58:[function(e,t,n){(function(t){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(5)["default"],o=e(4)["default"],s=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var u=e(61),l=s(u),c=e(59),h=e(60),d=s(h),f=e(35),p=e(77),v=s(p),g=e(62),y=s(g),m=e(63),_=s(m),b=e(64),C=s(b),A=e(65),k=s(A),w=e(79),E=e(76),S=e(38),N=e(81),D=s(N),P="undefined"==typeof window?t:window,T=P.Webcom?P.Webcom.SDK_VERSION:"0.0.0",R="Webcom._SimpleLogin",x=function(){function e(t,n,i,a){function o(e,t,n){setTimeout(function(){e(t,n)},0)}r(this,e),this.mRef=t,this.mNamespace=t.repo.name(),this.sessionLengthDays=null,n&&e.registerCallback(n,i);var s="undefined"!=typeof window&&"file:"===window.location.protocol&&!v.isPhantomJS()&&!v.isMobileCordovaInAppBrowser();s&&S.warn("WebcomSimpleLogin(): Due to browser security restrictions, loading applications via `file://*` URLs will prevent popup-based authentication providers from working properly. When testing locally, you'll need to run a barebones webserver on your machine rather than loading your test files via `file://*`. The easiest way to run a barebones server on your local machine is to `cd` to the root directory of your code and run `python -m SimpleHTTPServer`, which will allow you to access your content via `http://127.0.0.1:8000/*`."),a&&l.setApiHost(a),this.mLoginStateChange=function(t,n){for(var i=e.getCallbacks(),r=0;r<i.length;r++){var a=i[r],s=!!t||"undefined"==typeof a.user;if(!s){var u,l;a.user&&a.user.webcomAuthToken&&(u=a.user.webcomAuthToken),n&&n.webcomAuthToken&&(l=n.webcomAuthToken),s=(u||l)&&u!==l}e.updateCallback(r,"user",n||null),s&&o(E.bind(a.cb,a.ctx),t,n)}}}return i(e,[{key:"setApiHost",value:function(e){l.setApiHost(e)}},{key:"resumeSession",value:function(){var e,t,n=this;try{t=f.SessionStorage.get("requestId"),f.SessionStorage.remove("requestId")}catch(i){}if(t){var r=_;k.isAvailable()&&(r=k),r.open(l.getApiHost()+"/auth/session",{requestId:t,base:n.mNamespace},function(e,t){t&&t.token&&t.user?n.attemptAuth(t.token,t.user,!0):e?(d.clear(),n.mLoginStateChange(e)):(d.clear(),n.mLoginStateChange(null,null))})}else e=d.get(),e&&e.token&&e.user?n.attemptAuth(e.token,e.user,!1):n.mLoginStateChange(null,null)}},{key:"attemptAuth",value:function(e,t,n,i,r){var a=this;this.mRef.auth(e,function(o,s){o?(d.clear(),a.mLoginStateChange(null,null),r&&r()):(n&&d.set({token:e,user:t},a.sessionLengthDays),"function"==typeof s&&s(),t.webcomAuthToken=e,a.mLoginStateChange(null,t),i&&i(t))},function(){d.clear(),a.mLoginStateChange(null,null),r&&r()})}},{key:"login",value:function(e){var t=void 0===arguments[1]?{}:arguments[1],n="WebcomSimpleLogin.login()";switch(D.validateString(n,1,arguments[0],!1),D.validateArgCount(n,1,2,arguments.length),e=e.toLowerCase(),this.sessionLengthDays=t.rememberMe?30:null,e){case"anonymous":return this.loginAnonymously(t);case"facebook-token":return this.loginWithFacebookToken(t);case"github":return this.loginWithGithub(t);case"google-token":return this.loginWithGoogleToken(t);case"password":return this.loginWithPassword(t);case"twitter-token":return this.loginWithTwitterToken(t);case"facebook":return t.access_token?this.loginWithFacebookToken(t):this.loginWithFacebook(t);case"google":return t.access_token?this.loginWithGoogleToken(t):this.loginWithGoogle(t);case"twitter":return t.oauth_token&&t.oauth_token_secret?this.loginWithTwitterToken(t):this.loginWithTwitter(t);default:throw new Error("WebcomSimpleLogin.login("+e+") failed: unrecognized authentication provider")}}},{key:"loginAnonymously",value:function(e){var t=this,n=new a(function(n,i){e.base=t.mNamespace,e.v=T,_.open(l.getApiHost()+"/auth/anonymous",e,function(e,r){if(e||!r.token){var a=c.format(e);t.mLoginStateChange(a,null),i(a)}else{var o=r.token,s=r.user;t.attemptAuth(o,s,!0,n,i)}})});return n}},{key:"loginWithPassword",value:function(e){var t=this,n=new a(function(n,i){e.base=t.mNamespace,e.v=T,y.login(e,function(e,r){if(e||!r.token){var a=c.format(e);t.mLoginStateChange(a,null),i(a)}else{var o=r.token,s=r.user;t.attemptAuth(o,s,!0,n,i)}})});return n}},{key:"loginWithGithub",value:function(e){return e.height=850,e.width=950,this.loginViaOAuth("github",e)}},{key:"loginWithGoogle",value:function(e){return e.height=650,e.width=575,this.loginViaOAuth("google",e)}},{key:"loginWithFacebook",value:function(e){return e.height=400,e.width=535,this.loginViaOAuth("facebook",e)}},{key:"loginWithTwitter",value:function(e){return this.loginViaOAuth("twitter",e)}},{key:"loginWithFacebookToken",value:function(e){return this.loginViaToken("facebook",e)}},{key:"loginWithGoogleToken",value:function(e){return this.loginViaToken("google",e)}},{key:"loginWithTwitterToken",value:function(e){return this.loginViaToken("twitter",e)}},{key:"logout",value:function(e){d.clear(),this.mRef.unauth(e),this.mLoginStateChange(null,null)}},{key:"loginViaToken",value:function(e){var t=void 0===arguments[1]?{}:arguments[1];t.v=T;var n=this,i=l.getApiHost()+"/auth/"+e+"/token?base="+n.mNamespace,r=new a(function(e,r){_.open(i,t,function(t,i){if(!t&&i.token&&i.user){var a=i.token,o=i.user;n.attemptAuth(a,o,!0,e,r)}else{var s=c.format(t);n.mLoginStateChange(s),r(s)}})});return r}},{key:"loginViaOAuth",value:function(e){var t=void 0===arguments[1]?{}:arguments[1],n=this,i=l.getApiHost()+"/auth/"+e+"?base="+n.mNamespace;t.scope&&(i+="&scope="+t.scope),i+="&v="+encodeURIComponent(T);var r={menubar:0,location:0,resizable:0,scrollbars:1,status:0,dialog:1,width:700,height:375};t.height&&(r.height=t.height,delete t.height),t.width&&(r.width=t.width,delete t.width);var s,u=function(){return v.isMobileCordovaInAppBrowser()?"mobile-phonegap":v.isMobileTriggerIoTab()?"mobile-triggerio":v.isWindowsMetro()?"windows-metro":"desktop"}();if("desktop"===u){s=C;var h=[];o(r).forEach(function(e){h.push(e+"="+r[e])}),t.url+="&transport=winchan",t.relay_url=l.getApiHost()+"/auth/channel",t.window_features=h.join(",")}else"mobile-phonegap"===u?s=CordovaInAppBrowser:"mobile-triggerio"===u?s=TriggerIoTab:"windows-metro"===u&&(s=WindowsMetroAuthBroker);if(t.preferRedirect||v.isChromeiOS()||v.isWindowsPhone()||v.isStandaloneiOS()||v.isTwitteriOS()||v.isFacebookiOS()){var d=w.getRandomString()+w.getRandomString();try{f.SessionStorage.set("requestId",d)}catch(p){}return i+="&requestId="+d+"&fb_redirect_uri="+encodeURIComponent(window.location.href),void(window.location=i)}var g=new a(function(e,r){s.open(i,t,function(t,i){if(i&&i.token&&i.user)n.attemptAuth(i.token,i.user,!0,e,r);else{var a=t||{code:"UNKNOWN_ERROR",message:"An unknown error occurred."};"unknown closed window"===t?a={code:"USER_DENIED",message:"User cancelled the authentication request."}:i&&i.error&&(a=i.error),a=c.format(a),n.mLoginStateChange(a),r(a)}})});return g}},{key:"manageUsers",value:function(e,t,n){t.base=this.mNamespace;var i=new a(function(i,r){y[e](t,function(e,t){if(e){var a=c.format(e);return r(a),n&&n(a,null)}return i(t),n&&n(null,t)})});return i}},{key:"createUser",value:function(e,t,n){return this.manageUsers("createUser",{email:e,password:t},n)}},{key:"changePassword",value:function(e,t,n,i){return this.manageUsers("changePassword",{email:e,oldPassword:t,newPassword:n},function(e){return i&&i(e)})}},{key:"removeUser",value:function(e,t,n){return this.manageUsers("removeUser",{email:e,password:t},function(e){return n&&n(e)})}},{key:"sendPasswordResetEmail",value:function(e,t){return this.manageUsers("sendPasswordResetEmail",{email:e},function(e){return t&&t(e)})}}],[{key:"onOpen",value:function(e){C.onOpen(e)}},{key:"registerCallback",value:function(e,t){var n=S.getGlobalNamespace(R);n.callbacks=n.callbacks||[],n.callbacks.push({cb:e,ctx:t})}},{key:"getCallbacks",value:function(){var e=S.getGlobalNamespace(R);return e.callbacks=e.callbacks||[],e.callbacks}},{key:"updateCallback",value:function(t,n,i){var r=e.getCallbacks();t<r.length&&(r[t][n]=i)}}]),e}();n.Client=x,n["default"]=x}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{11:11,35:35,38:38,4:4,5:5,59:59,6:6,60:60,61:61,62:62,63:63,64:64,65:65,7:7,76:76,77:77,79:79,81:81}],59:[function(e,t,n){"use strict";function i(e,t){var n,i,o,s={},u=arguments.length;if(2===u)n=e,i=t;else if(1===u)if("object"==typeof e&&e.code&&e.message){if(0===e.message.indexOf(r))return e;n=e.code,i=e.message,s=e.data}else"string"==typeof e&&(n=e,i=a[n]);else n="UNKNOWN_ERROR",i=a[n];try{o=new Error(r+i)}catch(l){}return o.code=n,s&&(o.data=s),o}Object.defineProperty(n,"__esModule",{value:!0}),n.format=i;var r="WebcomSimpleLogin: ",a={UNKNOWN_ERROR:"An unknown error occurred.",INVALID_EMAIL:"Invalid email specified.",INVALID_PASSWORD:"Invalid password specified.",USER_DENIED:"User cancelled the authentication request.",RESPONSE_PAYLOAD_ERROR:"Unable to parse response payload.",TRIGGER_IO_TABS:'The "forge.tabs" module required when using Webcom Simple Login and Trigger.io. Without this module included and enabled, login attempts to OAuth authentication providers will not be able to complete.'};n["default"]={format:i}},{}],60:[function(e,t,n){"use strict";function i(e){o.PersistentStorage.set(s,e)}function r(){return o.PersistentStorage.get(s)}function a(){o.PersistentStorage.remove(s)}Object.defineProperty(n,"__esModule",{value:!0}),n.set=i,n.get=r,n.clear=a;var o=e(35),s="session";n["default"]={set:i,get:r,clear:a}},{35:35}],61:[function(e,t,n){"use strict";function i(e){a=/http(?:s)?:\/\/[^\/]*/.exec(e)[0]}function r(){return a}Object.defineProperty(n,"__esModule",{value:!0}),n.setApiHost=i,n.getApiHost=r;var a="";n["default"]={setApiHost:i,getApiHost:r}},{}],62:[function(e,t,n){"use strict";function i(){m.apply(void 0,["",1].concat(u.call(arguments)))}function r(){m.apply(void 0,["/create",7].concat(u.call(arguments)))}function a(){m.apply(void 0,["/update",15].concat(u.call(arguments)))}function o(){m.apply(void 0,["/remove",7].concat(u.call(arguments)))}function s(){m.apply(void 0,["/reset_password",3].concat(u.call(arguments)))}var u=e(12)["default"],l=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.login=i,n.createUser=r,n.changePassword=a,n.removeUser=o,n.sendPasswordResetEmail=s;var c=e(61),h=e(81),d=l(h),f=e(65),p=l(f),v=e(63),g=l(v),y=function(){return p.isAvailable()?p:g},m=function(e,t,n,i){var r=c.getApiHost()+"/auth/base"+e;return 1&t&&!d.isValidNamespace(n.base)?i&&i("INVALID_BASE"):2&t&&!d.isValidEmail(n.email)?i&&i("INVALID_EMAIL"):4&t&&!d.isValidPassword(8&t?n.newPassword:n.password)?i&&i("INVALID_PASSWORD"):void y().open(r,n,i)}},{11:11,12:12,61:61,63:63,65:65,81:81}],63:[function(e,t,n){"use strict";function i(){return"_JSONP"+(new Date).getTime()+Math.floor(100*Math.random())}function r(e){setTimeout(function(){delete c.getGlobalNamespace(h)[e];var t=document.getElementById(e);
t&&t.parentNode.removeChild(t)},0)}function a(e,t){c.getGlobalNamespace(h)[e]=function(n){var i=n.error||null;delete n.error,t(i,n),r(e)}}function o(e){var t;return e?(t=new Error(e.message),t.code=e.code||"UNKNOWN_ERROR"):(t=new Error,t.code="UNKNOWN_ERROR"),t}function s(e,t,n){setTimeout(function(){try{var i=document.createElement("script");i.type="text/javascript",i.id=e,i.async=!0,i.src=t,i.onerror=function(){var t=document.getElementById(e);null!==t&&t.parentNode.removeChild(t),n&&n(o({code:"SERVER_ERROR",message:"An unknown server error occurred."}))},document.getElementsByTagName("head")[0].appendChild(i)}catch(r){n&&n(o({code:"SERVER_ERROR",message:"An unknown server error occurred."}))}},0)}function u(e,t,n){e+=/\?/.test(e)?"":"?",e+="&transport=jsonp",l(t).forEach(function(n){e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n])});var r=i();e+="&callback="+encodeURIComponent(h+"."+r),a(r,n),s(r,e,n)}var l=e(4)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.open=u;var c=e(38),h="Webcom._SimpleLoginJSONP";n["default"]={open:u}},{38:38,4:4}],64:[function(e,t,n){"use strict";function i(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)}function r(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener&&e.removeEventListener(t,n,!1)}function a(e){/^https?:\/\//.test(e)||(e=window.location.href);var t=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(e);return t?t[1]:e}function o(){for(var e=window.location,t=window.opener.frames,n=e.protocol+"//"+e.host,i=t.length-1;i>=0;i--)try{if(0===t[i].location.href.indexOf(n)&&t[i].name===h)return t[i]}catch(r){}}function s(e,t,n){function o(e){if(l&&document.body.removeChild(l),l=void 0,y&&(y=clearInterval(y)),r(window,"message",s),r(window,"unload",o),g&&!e)try{g.close()}catch(t){v.postMessage(d,p)}g=v=void 0}function s(e){if(e.origin===p)try{var t=JSON.parse(e.data);"ready"===t.a?v.postMessage(m,p):"error"===t.a?(o(),n&&(n(t.d),n=null)):"response"===t.a&&(o(t.forceKeepWindowOpen),n&&(n(null,t.d),n=null))}catch(i){}}if(!n)throw"missing required callback argument";t.url=e;var u;t.url||(u="missing required 'url' parameter"),t.relay_url||(u="missing required 'relay_url' parameter"),u&&setTimeout(function(){n(u)},0),t.window_name||(t.window_name=null),(!t.window_features||c.isFennec())&&(t.window_features=void 0);var l,p=a(t.url);if(p!==a(t.relay_url))return setTimeout(function(){n("invalid arguments: origin of url and relay_url must match")},0);var v;f&&(l=document.createElement("iframe"),l.setAttribute("src",t.relay_url),l.style.display="none",l.setAttribute("name",h),document.body.appendChild(l),v=l.contentWindow);var g=window.open(t.url,t.window_name,t.window_features);v||(v=g);var y=setInterval(function(){g&&g.closed&&(o(),n&&(n("unknown closed window"),n=null))},500),m=JSON.stringify({a:"request",d:t.params});return i(window,"unload",o),i(window,"message",s),{close:o,focus:function(){if(g)try{g.focus()}catch(e){}}}}function u(e){function t(e){e=JSON.stringify(e),f?u.doPost(e,s):u.postMessage(e,s)}function n(i){var a;try{a=JSON.parse(i.data)}catch(o){}a&&"request"===a.a&&(r(window,"message",n),s=i.origin,e&&setTimeout(function(){e(s,a.d,function(n,i){l=!i,e=void 0,t({a:"response",d:n,forceKeepWindowOpen:i})})},0))}function a(e){if(l&&e.data===d)try{window.close()}catch(t){}}var s="*",u=f?o():window.opener,l=!0;if(!u)throw"can't find relay frame";i(f?u:window,"message",n),i(f?u:window,"message",a);try{t({a:"ready"})}catch(c){i(u,"load",function(){t({a:"ready"})})}var h=function(){try{r(f?u:window,"message",a)}catch(n){}e&&t({a:"error",d:"client closed window"}),e=void 0;try{window.close()}catch(i){}};return i(window,"unload",h),{detach:function(){r(window,"unload",h)}}}function l(){return JSON&&JSON.parse&&JSON.stringify&&window.postMessage}Object.defineProperty(n,"__esModule",{value:!0}),n.open=s,n.onOpen=u,n.isAvailable=l;var c=e(77),h="__winchan_relay_frame",d="die",f=function(){var e,t,n=-1,i="undefined"!=typeof navigator?navigator.userAgent||"":"";return"undefined"!=typeof navigator&&"Microsoft Internet Explorer"===navigator.appName?(e=/MSIE ([0-9]+[\.0-9]*)/,t=i.match(e),t&&t.length>1&&(n=parseFloat(t[1]))):i.indexOf("Trident")>-1&&(e=/rv:([0-9]{2}[\.0-9]*)/,t=i.match(e),t&&t.length>1&&(n=parseFloat(t[1]))),n>=8}();n["default"]={open:s,onOpen:u,isAvailable:l}},{77:77}],65:[function(e,t,n){"use strict";function i(e){if(!e)return"";var t=[];return o(e).forEach(function(n){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}),t.join("&")}function r(e,t,n){var r=new XMLHttpRequest,a={contentType:"application/json"},s=(a.method||"GET").toUpperCase(),u=a.contentType||"application/x-www-form-urlencoded",l=!1;r.onreadystatechange=function(){if(!l&&4===r.readyState){var e,t;if(l=!0,r.status>=200&&r.status<300||304===r.status||1223===r.status)try{e=JSON.parse(r.responseText),t=e.error||null,delete e.error}catch(i){t="UNKNOWN_ERROR"}else t="RESPONSE_PAYLOAD_ERROR";return n&&n(t,e)}},t&&("GET"===s?(-1===e.indexOf("?")&&(e+="?"),e+=i(t),t=null):("application/json"===u&&(t=JSON.stringify(t)),"application/x-www-form-urlencoded"===u&&(t=i(t)))),r.open(s,e,!0);var c={Accept:"application/json;text/plain","Content-Type":u};a.headers=a.headers||{},o(a.headers).forEach(function(e){c[e]=a.headers[e]}),o(c).forEach(function(e){r.setRequestHeader(e,c[e])}),r.send(t)}function a(){return"undefined"!=typeof window&&window.XMLHttpRequest&&!s.isIeLT10()}var o=e(4)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.open=r,n.isAvailable=a;var s=e(77);n["default"]={open:r,isAvailable:a}},{4:4,77:77}],66:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(11)["default"],o=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=e(38),u=a(s),l=e(68),c=o(l),h=e(67),d=e(35),f=0,p=1,v=2,g="t",y="d",m="r",_="o",b="a",C="n",A="p",k=function(){function e(t,n,i,a,o,s){r(this,e),this.id=t,this.log_=u.logWrapper("c:"+this.id+":"),this.onMessage_=i,this.onReady_=a,this.onDisconnect_=o,this.onKill_=s,this.repoInfo_=n,this.pendingDataMessages=[],this.connectionCount=0,this.transportManager_=new c["default"](n),this.state_=f,this.log_("Connection created"),this.start_()}return i(e,[{key:"start_",value:function(){var e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1;var i=this;setTimeout(function(){i.conn_&&i.conn_.open(t,n)},Math.floor(0));var r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=setTimeout(function(){i.healthyTimeout_=null,i.isHealthy_||(i.conn_&&i.conn_.bytesReceived>102400?(i.log_("Connection exceeded healthy timeout but has received "+i.conn_.bytesReceived+" bytes.  Marking connection healthy."),i.isHealthy_=!0,i.conn_.markConnectionHealthy()):i.conn_&&i.conn_.bytesSent>10240?i.log_("Connection exceeded healthy timeout but has sent "+i.conn_.bytesSent+" bytes.  Leaving connection alive."):(i.log_("Closing unhealthy connection after timeout."),i.close()))},Math.floor(r)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){t.state_!==v&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){this.sendData_({t:"d",d:e})}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if(g in e){var t=e[g];t===b?this.upgradeIfSecondaryHealthy_():t===m?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=s.requireKey("t",e),n=s.requireKey("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:A,d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:b,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:C,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=s.requireKey("t",e),n=s.requireKey("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=s.requireKey(g,e);if(y in e){var n=e[y];if("h"===t)this.onHandshake_(n);else if(t===C){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):t===m?this.onReset_(n):"e"===t?u.error("Server Error: "+n):t===_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):u.error("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(i),this.state_===f&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),h.PROTOCOL_VERSION!==n&&u.warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n);var i=this;setTimeout(function(){i.secondaryConn_&&(i.log_("Timed out trying to upgrade."),i.secondaryConn_.close())},Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),this.state_===p?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=p,this.onReady_&&(this.onReady_(t),this.onReady_=null);var n=this;0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeout(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||this.state_!==p||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:A,d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||this.state_!==f?this.state_===p&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(this.state_!==p)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){this.state_!==v&&(this.log_("Closing realtime connection."),this.state_=v,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}();n["default"]=k,t.exports=n["default"]},{10:10,11:11,35:35,38:38,6:6,67:67,68:68,7:7}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="5";n.PROTOCOL_VERSION=i;var r="v";n.VERSION_PARAM=r;var a="s";n.SESSION_PARAM=a,n["default"]={PROTOCOL_VERSION:i,VERSION_PARAM:r,SESSION_PARAM:a}},{}],68:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(10)["default"],o=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=e(69),u=a(s),l=e(38),c=o(l),h=function(){function e(t){r(this,e),this.initTransports_(t)}return i(e,[{key:"initTransports_",value:function(e){var t=u["default"]&&u["default"].isAvailable(),n=t&&!u["default"].previouslyFailed();if(e.webSocketOnly&&(t||c.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[u["default"]];else{var i=this.transports_=[];c.each([u["default"]],function(e,t){t&&t.isAvailable()&&i.push(t)})}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}]),e}();n["default"]=h,t.exports=n["default"]},{10:10,11:11,38:38,6:6,69:69,7:7}],69:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(11)["default"],o=e(10)["default"];Object.defineProperty(n,"__esModule",{value:!0});var s=e(67),u=a(s),l=e(33),c=e(42),h=(o(c),e(38)),d=a(h),f=e(35),p=null;"undefined"!=typeof MozWebSocket?p=MozWebSocket:"undefined"!=typeof WebSocket&&(p=WebSocket);var v=!1,g=function(){function e(t,n,i){r(this,e),this.connId=t,this.log_=d.logWrapper(this.connId),this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.stats_=l.getCollection(n),this.connURL=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?"+u.VERSION_PARAM+"="+u.PROTOCOL_VERSION,n.needsQueryParam()&&(this.connURL=this.connURL+"&ns="+n.namespace),i&&(this.connURL=this.connURL+"&"+u.SESSION_PARAM+"="+i)}return i(e,[{key:"open",value:function(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.mySock=new p(this.connURL),this.everConnected_=!1,f.PersistentStorage.set("previous_websocket_failure",!0);var n=this;this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(e){n.log_("Websocket connection was disconnected: "+e.code),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){f.PersistentStorage.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=JSON.parse(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(d.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=JSON.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=d.splitStringBySize(t,16384);n.length>1&&this.mySock.send(String(n.length));for(var i=0;i<n.length;i++)this.mySock.send(n[i])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.mySock.send("0"),e.resetKeepAlive()},Math.floor(45e3))}},{key:"responsesRequiredToBeHealthy",get:function(){return 2}},{key:"healthyTimeout",get:function(){return 3e4}}],[{key:"forceDisallow",value:function(){v=!0}},{key:"isAvailable",value:function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]*\.[0-9]*)/);t&&t.length>1&&parseFloat(t[1])<4.4&&(e=!0)}return!e&&null!==p&&!v}},{key:"previouslyFailed",value:function(){return f.PersistentStorage.isInMemoryStorage||f.PersistentStorage.get("previous_websocket_failure")===!0}}]),e}();n["default"]=g,t.exports=n["default"]},{10:10,11:11,33:33,35:35,38:38,42:42,6:6,67:67,7:7}],70:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"];Object.defineProperty(n,"__esModule",{value:!0});var a={corrupt:function(){function e(t){r(this,e),this.message=t}return i(e,[{key:"toString",value:function(){return"CORRUPT: "+this.message}}]),e}(),invalid:function(){function e(t){r(this,e),this.message=t}return i(e,[{key:"toString",value:function(){return"INVALID: "+this.message}}]),e}(),bug:function(){function e(t){r(this,e),this.message=t}return i(e,[{key:"toString",value:function(){return"BUG: "+this.message}}]),e}(),notReady:function(){function e(t){r(this,e),this.message=t}return i(e,[{key:"toString",value:function(){return"NOT READY: "+this.message}}]),e}()};n.exception=a,n["default"]={exception:a}},{6:6,7:7}],71:[function(e,t,n){"use strict";function i(e,t,n){return e=h(e.slice(t/32),32-(31&t)).slice(1),void 0===n?e:s(e,n-t)}function r(e,t,n){var i,r=Math.floor(-t-n&31);return i=-32&(t+n-1^t)?e[t/32|0]<<32-r^e[t/32+1|0]>>>r:e[t/32|0]>>>r,i&(1<<n)-1}function a(e,t){if(0===e.length||0===t.length)return e.concat(t);var n=e[e.length-1],i=l(n);return 32===i?e.concat(t):h(t,i,0|n,e.slice(0,e.length-1))}function o(e){var t,n=e.length;return 0===n?0:(t=e[n-1],32*(n-1)+l(t))}function s(e,t){if(32*e.length<t)return e;e=e.slice(0,Math.ceil(t/32));var n=e.length;return t=31&t,n>0&&t&&(e[n-1]=u(t,e[n-1]&2147483648>>t-1,1)),e}function u(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e}function l(e){return Math.round(e/1099511627776)||32}function c(e,t){if(o(e)!==o(t))return!1;var n,i=0;for(n=0;n<e.length;n++)i|=e[n]^t[n];return 0===i}function h(e,t,n,i){var r,a,o=0;for(void 0===i&&(i=[]);t>=32;t-=32)i.push(n),n=0;if(0===t)return i.concat(e);for(r=0;r<e.length;r++)i.push(n|e[r]>>>t),n=e[r]<<32-t;return o=e.length?e[e.length-1]:0,a=l(o),i.push(u(t+a&31,t+a>32?n:i.pop(),1)),i}function d(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}function f(e){var t,n,i=65280;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&i|(n&i)<<8|n<<24;return e}Object.defineProperty(n,"__esModule",{value:!0}),n.bitSlice=i,n.extract=r,n.concat=a,n.bitLength=o,n.clamp=s,n.partial=u,n.getPartial=l,n.equal=c,n._shiftRight=h,n._xor4=d,n.byteswapM=f},{}],72:[function(e,t,n){"use strict";function i(e,t,n){var i,r="",a=0,o=l,u=0,c=s.bitLength(e);for(n&&(o=o.substr(0,62)+"-_"),i=0;6*r.length<c;)r+=o.charAt((u^e[i]>>>a)>>>26),6>a?(u=e[i]<<6-a,a+=26,i++):(u<<=6,a-=6);for(;3&r.length&&!t;)r+="=";return r}function r(e,t){e=e.replace(/\s|=/g,"");var n,i,r=[],a=0,o=l,c=0;for(t&&(o=o.substr(0,62)+"-_"),n=0;n<e.length;n++){if(i=o.indexOf(e.charAt(n)),0>i)throw new u.exception.invalid("this isn't base64!");a>26?(a-=26,r.push(c^i>>>a),c=i<<32-a):(a+=6,c^=i<<32-a)}return 56&a&&r.push(s.partial(56&a,c,1)),r}var a=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.fromBits=i,n.toBits=r;var o=e(71),s=a(o),u=e(70),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},{11:11,70:70,71:71}],73:[function(e,t,n){"use strict";function i(e){var t,n,i="",r=s.bitLength(e);for(t=0;r/8>t;t++)0===(3&t)&&(n=e[t/4]),i+=String.fromCharCode(n>>>24),n<<=8;return decodeURIComponent(escape(i))}function r(e){e=unescape(encodeURIComponent(e));var t,n=[],i=0;for(t=0;t<e.length;t++)i=i<<8|e.charCodeAt(t),3===(3&t)&&(n.push(i),i=0);return 3&t&&n.push(s.partial(8*(3&t),i)),n}var a=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.fromBits=i,n.toBits=r;var o=e(71),s=a(o)},{11:11,71:71}],74:[function(e,t,n){"use strict";var i=e(7)["default"],r=e(6)["default"],a=e(11)["default"];Object.defineProperty(n,"__esModule",{value:!0});var o=e(71),s=a(o),u=e(73),l=512,c=function(){function e(t){r(this,e),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()}return i(e,[{key:"reset",value:function(){return this._h=[1732584193,4023233417,2562383102,271733878,3285377520].slice(0),this._buffer=[],this._length=0,this}},{key:"update",value:function(e){"string"==typeof e&&(e=u.toBits(e));var t,n=this._buffer=s.concat(this._buffer,e),i=this._length,r=this._length=i+s.bitLength(e);for(t=l+i&-l;r>=t;t+=l)this._block(n.splice(0,16));return this}},{key:"finalize",value:function(){var e,t=this._buffer,n=this._h;for(t=s.concat(t,[s.partial(1,1)]),e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this._length/4294967296)),t.push(0|this._length);t.length;)this._block(t.splice(0,16));return this.reset(),n}},{key:"_f",value:function(e,t,n,i){return 19>=e?t&n|~t&i:39>=e?t^n^i:59>=e?t&n|t&i|n&i:79>=e?t^n^i:void 0}},{key:"_S",value:function(e,t){return t<<e|t>>>32-e}},{key:"_block",value:function(e){var t,n,i,r,a,o,s,u=e.slice(0),l=this._h;for(i=l[0],r=l[1],a=l[2],o=l[3],s=l[4],t=0;79>=t;t++)t>=16&&(u[t]=this._S(1,u[t-3]^u[t-8]^u[t-14]^u[t-16])),n=this._S(5,i)+this._f(t,r,a,o)+s+u[t]+[1518500249,1859775393,2400959708,3395469782][Math.floor(t/20)]|0,s=o,o=a,a=this._S(30,r),r=i,i=n;l[0]=l[0]+i|0,l[1]=l[1]+r|0,l[2]=l[2]+a|0,l[3]=l[3]+o|0,l[4]=l[4]+s|0}}],[{key:"hash",value:function(t){return(new e).update(t).finalize()}}]),e}();n.sha1=c,n["default"]=c},{11:11,6:6,7:7,71:71,73:73}],75:[function(e,t,n){"use strict";function i(){return d.apply(void 0,["forEach"].concat(l.call(arguments)))}function r(){return d.apply(void 0,["map"].concat(l.call(arguments)))}function a(){return d.apply(void 0,["every"].concat(l.call(arguments)))}function o(e,t){var n=void 0===arguments[2]?0:arguments[2],i=void 0===arguments[3]?null:arguments[3];return i&&(t=h.bind(t,i)),d("reduce",e,t,n,i)}function s(e,t,n){for(var i=e.length,r=c.isString(e)?e.split(""):e,a=0;i>a;a++)if(a in r&&t.call(n,r[a],a,e))return a;return-1}function u(e,t,n){var i=s(e,t,n);return 0>i?null:c.isString(e)?e.charAt(i):e[i]}var l=e(12)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.forEach=i,n.map=r,n.every=a,n.reduce=o,n.findIndex=s,n.find=u;var c=e(77),h=e(76),d=function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;n>r;r++)i[r-2]=arguments[r];return t[e].apply(t,i)};n["default"]={forEach:i,map:r,reduce:o,find:u,findIndex:s}},{12:12,76:76,77:77}],76:[function(e,t,n){"use strict";function i(e,t){return t?s(e,t):e}function r(e){try{e()}catch(t){setTimeout(function(){throw t},Math.floor(0))}}function a(){}function o(){throw Error("unimplemented abstract method")}function s(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;n>r;r++)i[r-2]=arguments[r];return e.bind.apply(e,[t].concat(i))}Object.defineProperty(n,"__esModule",{value:!0}),n.bindCallback=i,n.exceptionGuard=r,n.nullFunction=a,n.abstractMethod=o,n.bind=s,n["default"]={abstractMethod:o,exceptionGuard:r,nullFunction:a,bind:s,bindCallback:i}},{}],77:[function(e,t,n){"use strict";function i(e){var t=typeof e;if("object"===t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"===n)return"object";if("[object Array]"===n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"===n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"===t&&"undefined"==typeof e.call)return"object";return t}function r(e){return"array"===i(e)}function a(e){var t=i(e);return"array"===t||"object"===t&&"number"==typeof e.length}function o(e){return"string"==typeof e}function s(e){return"boolean"==typeof e}function u(e){return"number"==typeof e}function l(e){return"function"===i(e)}function c(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function h(e){var t=new RegExp("^(https?://)?([a-z\\d]+:[a-z\\d%_.~+=-]+@)?((((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,})|([a-z\\d]+))|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!t.test(e)}function d(e){return void 0!==e}function f(){return(window.cordova||window.CordovaInAppBrowser||window.phonegap)&&/ios|iphone|ipod|ipad|android/i.test(navigator.userAgent)}function p(){return window.forge&&/ios|iphone|ipod|ipad|android/i.test(navigator.userAgent)}function v(){return!!window.Windows&&/^ms-appx:/.test(location.href)}function g(){return!!navigator.userAgent.match(/CriOS/)}function y(){return!!navigator.userAgent.match(/Twitter for iPhone/)}function m(){return!!navigator.userAgent.match(/FBAN\/FBIOS/)}function _(){return!!navigator.userAgent.match(/Windows Phone/)}function b(){return!!window.navigator.standalone}function C(){return!!navigator.userAgent.match(/PhantomJS/)}function A(){var e,t,n=-1,i=navigator.userAgent;return"Microsoft Internet Explorer"===navigator.appName&&(e=/MSIE ([0-9]+[\.0-9]*)/,t=i.match(e),t&&t.length>1&&(n=parseFloat(t[1])),10>n)}function k(){try{var e=navigator.userAgent;return-1!==e.indexOf("Fennec/")||-1!==e.indexOf("Firefox/")&&-1!==e.indexOf("Android")}catch(t){}return!1}Object.defineProperty(n,"__esModule",{value:!0}),n.typeOf=i,n.isArray=r,n.isArrayLike=a,n.isString=o,n.isBoolean=s,n.isNumber=u,n.isFunction=l,n.isObject=c,n.isUrl=h,n.isDef=d,n.isMobileCordovaInAppBrowser=f,n.isMobileTriggerIoTab=p,n.isWindowsMetro=v,n.isChromeiOS=g,n.isTwitteriOS=y,n.isFacebookiOS=m,n.isWindowsPhone=_,n.isStandaloneiOS=b,n.isPhantomJS=C,n.isIeLT10=A,n.isFennec=k,n["default"]={typeOf:i,isDef:d,isArray:r,isArrayLike:a,isString:o,isBoolean:s,isNumber:u,isFunction:l,isObject:c,isUrl:h,isMobileCordovaInAppBrowser:f,isMobileTriggerIoTab:p,isWindowsMetro:v,isChromeiOS:g,isTwitteriOS:y,isFacebookiOS:m,isWindowsPhone:_,isStandaloneiOS:b,isPhantomJS:C,isIeLT10:A,isFennec:k}},{}],78:[function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function a(e,t,n){c(e).forEach(function(i){t.call(n,e[i],i,e)})}function o(e){return c(e).length}function s(e){return 0===c(e).length}function u(e){var t={};return a(e,function(e,n){t[n]=e}),t}var l=e(4)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.contains=i,n.get=r,n.forEach=a,n.getCount=o,n.isEmpty=s,n.clone=u;var c=function(e){return e&&e instanceof Object?l(e):[]};n.getKeys=c,n["default"]={contains:i,forEach:a,getCount:o,isEmpty:s,clone:u,getKeys:c,get:r}},{4:4}],79:[function(e,t,n){"use strict";function i(e){return encodeURIComponent(String(e))}function r(e){return decodeURIComponent(e.replace(/\+/g," "))}function a(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^Date.now()).toString(36)}function o(e){var t=document.createElement("a");return t.href=e,{protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:s(t.search),hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1")}}function s(e){for(var t={},n=e.replace(/^\?/,"").split("&"),i=0;i<n.length;i++)if(n[i]){var r=n[i].split("=");t[r[0]]=r[1]}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.urlEncode=i,n.urlDecode=r,n.getRandomString=a,n.parseUrl=o,n.parseQuerystring=s,n["default"]={urlDecode:r,urlEncode:i,getRandomString:a,parseQuerystring:s,parseUrl:o}},{}],80:[function(e,t,n){"use strict";function i(e){for(var t,n,i,a=[],o=0,s=0;s<e.length;s++)t=e.charCodeAt(s),t>=55296&&56319>=t&&(n=t-55296,s++,r.assert(s<e.length,"Surrogate pair missing trail surrogate."),i=e.charCodeAt(s)-56320,t=65536+(n<<10)+i),128>t?a[o++]=t:2048>t?(a[o++]=t>>6|192,a[o++]=63&t|128):65536>t?(a[o++]=t>>12|224,a[o++]=t>>6&63|128,a[o++]=63&t|128):(a[o++]=t>>18|240,a[o++]=t>>12&63|128,a[o++]=t>>6&63|128,a[o++]=63&t|128);return a}Object.defineProperty(n,"__esModule",{value:!0}),n.stringToByteArray=i;var r=e(38);n["default"]={stringToByteArray:i}},{38:38}],81:[function(e,t,n){"use strict";function i(e,t,n,i){var r;if(t>i?r="at least "+t:i>n&&(r=0===n?"none":"no more than "+n),r){var a=e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".";throw new Error(a)}}function r(e,t,n){var i="";switch(t){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:p.assert(!1,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}var r=e+" failed: ";return r+=i+" argument "}function a(){return v.apply(void 0,[f.isString,"must be a valid webcom namespace."].concat(d.call(arguments)))}function o(){return v.apply(void 0,[f.isFunction,"must be a valid function."].concat(d.call(arguments)))}function s(){return v.apply(void 0,[f.isString,"must be a valid string."].concat(d.call(arguments)))}function u(){return v.apply(void 0,[function(e){return null!==e&&f.isObject(e)},"must be a valid context object."].concat(d.call(arguments)))}function l(e){return f.isString(e)&&/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,6})+$/.test(e)}function c(e){return f.isString(e)}function h(e){return f.isString(e)}var d=e(12)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.validateArgCount=i,n.errorPrefix=r,n.validateNamespace=a,n.validateCallback=o,n.validateString=s,n.validateContextObject=u,n.isValidEmail=l,n.isValidPassword=c,n.isValidNamespace=h;var f=e(77),p=e(38),v=function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;n>a;a++)i[a-2]=arguments[a];if((!i[3]||f.isDef(i[2]))&&!e(i[2]))throw i.splice(2,1),new Error(r.apply(void 0,i)+t)};n["default"]={errorPrefix:r,validateArgCount:i,validateCallback:o,validateContextObject:u,validateNamespace:a,
validateString:s,isValidEmail:l,isValidPassword:c,isValidNamespace:h}},{12:12,38:38,77:77}]},{},[57])(57)})}]);